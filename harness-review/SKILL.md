---
name: harness-review
description: "Multi-perspective review supporting code, plan, and scope analysis. Auto-detects review type from context. Use when user mentions reviews, code review, plan review, scope analysis, security, performance, quality checks, PRs, diffs, or change review. Do NOT load for: implementation work, new feature development, bug fixes, or setup."
allowed-tools: ["Read", "Grep", "Glob", "Bash", "Task"]
context: fork
---

# Review Skills

ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€è¨ˆç”»ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€ã‚¹ã‚³ãƒ¼ãƒ—åˆ†æã‚’æ‹…å½“ã™ã‚‹ã‚¹ã‚­ãƒ«ç¾¤ã§ã™ã€‚
ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒ—ã‚’è‡ªå‹•åˆ¤å®šã—ã¾ã™ã€‚

## ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒ—ï¼ˆContext-Awareï¼‰

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒ—ã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰è‡ªå‹•åˆ¤å®šã•ã‚Œã¾ã™ï¼š

| Recent Activity | Review Type | 4 Experts |
|-----------------|-------------|-----------|
| `/plan-with-agent` å¾Œ | **Plan Review** | Clarity, Feasibility, Dependencies, Acceptance |
| `/work` å¾Œ | **Code Review** | Security, Performance, Quality, Accessibility |
| ã‚¿ã‚¹ã‚¯è¿½åŠ å¾Œ | **Scope Review** | Scope-creep, Priority, Feasibility, Impact |

### æ‰‹å‹•æŒ‡å®š

```bash
/harness-review           # è‡ªå‹•åˆ¤å®š
/harness-review code      # ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å¼·åˆ¶
/harness-review plan      # è¨ˆç”»ãƒ¬ãƒ“ãƒ¥ãƒ¼å¼·åˆ¶
/harness-review scope     # ã‚¹ã‚³ãƒ¼ãƒ—åˆ†æå¼·åˆ¶
```

---

## æ©Ÿèƒ½è©³ç´°ï¼ˆCode Reviewï¼‰

| æ©Ÿèƒ½ | è©³ç´° |
|------|------|
| **å¤‰æ›´ãƒ¬ãƒ“ãƒ¥ãƒ¼** | See [references/changes-review.md](references/changes-review.md) |
| **å“è³ªãƒã‚§ãƒƒã‚¯** | See [references/quality-review.md](references/quality-review.md) |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** | See [references/security-review.md](references/security-review.md) |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** | See [references/performance-review.md](references/performance-review.md) |
| **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£** | See [references/accessibility-review.md](references/accessibility-review.md) |
| **SEO/OGP** | See [references/seo-review.md](references/seo-review.md) |
| **Codex çµ±åˆ** | See [references/codex-integration.md](references/codex-integration.md) |
| **ã‚³ãƒŸãƒƒãƒˆåˆ¤å®š** | See [references/commit-judgment-logic.md](references/commit-judgment-logic.md) |

## æ©Ÿèƒ½è©³ç´°ï¼ˆPlan/Scope Reviewï¼‰

Plan Review ã¨ Scope Review ã¯ Codex ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

| ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒ— | ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ | å‚ç…§ |
|--------------|-------------|------|
| **Plan Review** | Clarity, Feasibility, Dependencies, Acceptance | `../codex-review/references/experts/clarity-expert.md` ç­‰ |
| **Scope Review** | Scope-creep, Priority, Feasibility, Impact | `../codex-review/references/experts/scope-creep-expert.md` ç­‰ |

è©³ç´°: [../codex-review/references/codex-parallel-review.md](../codex-review/references/codex-parallel-review.md)

## å®Ÿè¡Œæ‰‹é †

1. **å“è³ªåˆ¤å®šã‚²ãƒ¼ãƒˆ**ï¼ˆStep 0ï¼‰
2. **æ®‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç¢ºèªï¼ˆCodex ãƒ¢ãƒ¼ãƒ‰æ™‚ï¼‰**ï¼ˆStep 1ï¼‰
3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’åˆ†é¡
4. **ï¼ˆClaude-mem æœ‰åŠ¹æ™‚ï¼‰éå»ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã‚’æ¤œç´¢**
5. ä¸¦åˆ—å®Ÿè¡Œã®åˆ¤å®šï¼ˆä¸‹è¨˜å‚ç…§ï¼‰
6. ä¸Šè¨˜ã®ã€Œæ©Ÿèƒ½è©³ç´°ã€ã‹ã‚‰é©åˆ‡ãªå‚ç…§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚€ã€ã¾ãŸã¯ä¸¦åˆ—ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•
7. çµæœã‚’çµ±åˆã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†

### å…¥åŠ›ã®å„ªå…ˆé †ä½

- `files` ãŒæ¸¡ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ **ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿** ã‚’å¯¾è±¡ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹
- `files` ãŒæ¸¡ã•ã‚Œã¦ã„ãªã„å ´åˆã¯ `git_diff` ã‹ã‚‰å¤‰æ›´ç®‡æ‰€ã‚’æ¨å®šã™ã‚‹
- `context_from: code_content` ãŒæ¸¡ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ **ãã®å†…å®¹ã‚’å„ªå…ˆ** ã—ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹

### Step 0: å“è³ªåˆ¤å®šã‚²ãƒ¼ãƒˆï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼é‡ç‚¹é ˜åŸŸã®ç‰¹å®šï¼‰

ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹å‰ã«å¤‰æ›´å†…å®¹ã‚’åˆ†æã—ã€é‡ç‚¹é ˜åŸŸã‚’ç‰¹å®š:

```
å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å“è³ªåˆ¤å®šã‚²ãƒ¼ãƒˆ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ¤å®šé …ç›®:                              â”‚
â”‚  â”œâ”€â”€ ã‚«ãƒãƒ¬ãƒƒã‚¸ä¸è¶³ï¼Ÿï¼ˆãƒ†ã‚¹ãƒˆãªã—ï¼‰     â”‚
â”‚  â”œâ”€â”€ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„ï¼Ÿï¼ˆauth/api/ï¼‰    â”‚
â”‚  â”œâ”€â”€ a11y æ³¨æ„ï¼Ÿï¼ˆUI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰   â”‚
â”‚  â””â”€â”€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ³¨æ„ï¼Ÿï¼ˆDB/ãƒ«ãƒ¼ãƒ—ï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
    é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼é ˜åŸŸã‚’æ±ºå®š
```

#### ã‚«ãƒãƒ¬ãƒƒã‚¸åˆ¤å®š

| çŠ¶æ³ | æŒ‡æ‘˜å†…å®¹ |
|------|---------|
| æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ†ã‚¹ãƒˆãªã— | ã€Œãƒ†ã‚¹ãƒˆãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€ |
| å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆãŒå¤ã„ | ã€Œãƒ†ã‚¹ãƒˆã®æ›´æ–°ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€ |
| ã‚«ãƒãƒ¬ãƒƒã‚¸ < 60% | ã€Œã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Šã‚’æ¨å¥¨ã€ |

#### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼

| ãƒ‘ã‚¹ | è¿½åŠ ãƒã‚§ãƒƒã‚¯é …ç›® |
|------|-----------------|
| auth/, api/ | OWASP Top 10 ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ |
| å…¥åŠ›å‡¦ç† | ã‚µãƒ‹ã‚¿ã‚¤ã‚ºã€ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| DB ã‚¯ã‚¨ãƒª | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ç¢ºèª |

#### a11y é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼

| ãƒ‘ã‚¹ | ãƒã‚§ãƒƒã‚¯é …ç›® |
|------|------------|
| src/components/ | alt, aria, ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ |
| src/pages/ | è¦‹å‡ºã—æ§‹é€ , ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç† |

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | è­¦å‘Šå†…å®¹ |
|---------|---------|
| ãƒ«ãƒ¼ãƒ—å†… DB ã‚¯ã‚¨ãƒª | N+1 ã‚¯ã‚¨ãƒªã®å¯èƒ½æ€§ |
| å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å‡¦ç† | ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ¤œè¨ |
| useEffect ä¹±ç”¨ | ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ– |

#### SEO/OGP é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼

| ãƒ‘ã‚¹ | ãƒã‚§ãƒƒã‚¯é …ç›® |
|------|------------|
| src/pages/, app/ | title, description, canonical |
| public/ | robots.txt, sitemap.xml, OGP ç”»åƒ |
| layout.tsx, _document.tsx | viewport, OGP ã‚¿ã‚°, Twitter Card |

#### ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼

| ãƒ‘ã‚¹ | ãƒã‚§ãƒƒã‚¯é …ç›® |
|------|------------|
| src/components/, app/ | ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼ˆå›ºå®šå¹…ãƒã‚§ãƒƒã‚¯ï¼‰ |
| *.css, *.scss, tailwind | 100vw ä½¿ç”¨ã€overflow è¨­å®š |
| public/ | favicon, apple-touch-icon |

#### é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼çµ±åˆå‡ºåŠ›

```markdown
ğŸ“Š å“è³ªåˆ¤å®šçµæœ â†’ é‡ç‚¹ãƒ¬ãƒ“ãƒ¥ãƒ¼é ˜åŸŸ

| åˆ¤å®š | è©²å½“ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« |
|------|------|-------------|
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ | âš ï¸ | src/api/auth.ts |
| ã‚«ãƒãƒ¬ãƒƒã‚¸ | âš ï¸ | src/utils/helpers.ts (ãƒ†ã‚¹ãƒˆãªã—) |
| a11y | âœ… | - |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ | âœ… | - |
| SEO/OGP | âš ï¸ | app/layout.tsx (OGP æœªè¨­å®š) |
| ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | âœ… | - |

â†’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ»SEO ã‚’é‡ç‚¹çš„ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼
```

#### LSP ãƒ™ãƒ¼ã‚¹ã®å½±éŸ¿åˆ†æï¼ˆæ¨å¥¨ï¼‰

å¤‰æ›´ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã« LSP ãƒ„ãƒ¼ãƒ«ã§å½±éŸ¿ç¯„å›²ã‚’ç¢ºèª:

| å¤‰æ›´ã‚¿ã‚¤ãƒ— | LSP æ“ä½œ | ç¢ºèªå†…å®¹ |
|-----------|---------|---------|
| é–¢æ•°ã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´ | findReferences | å…¨å‘¼ã³å‡ºã—å…ƒãŒå¯¾å¿œæ¸ˆã¿ã‹ |
| å‹å®šç¾©å¤‰æ›´ | findReferences | ä½¿ç”¨ç®‡æ‰€ã§ã®å‹äº’æ›æ€§ |
| API å¤‰æ›´ | incomingCalls | å½±éŸ¿ã‚’å—ã‘ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ |

**ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ãƒ­ãƒ¼**:
1. å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®š
2. `LSP.findReferences` ã§å½±éŸ¿ç¯„å›²ã‚’åˆ—æŒ™
3. å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å«ã‚ã¦ãƒ¬ãƒ“ãƒ¥ãƒ¼

**ä½¿ç”¨ä¾‹**:
```
# 1. å¤‰æ›´ã•ã‚ŒãŸé–¢æ•°ã®å‚ç…§ç®‡æ‰€ã‚’ç¢ºèª
LSP operation=findReferences filePath="src/api/user.ts" line=42 character=15

# 2. é–¢æ•°ã®å‘¼ã³å‡ºã—éšå±¤ã‚’ç¢ºèª
LSP operation=incomingCalls filePath="src/api/user.ts" line=42 character=15

# 3. å‹å®šç¾©ã®ä½¿ç”¨ç®‡æ‰€ã‚’ç¢ºèª
LSP operation=findReferences filePath="src/types/api.ts" line=10 character=12
```

**å‡ºåŠ›ä¾‹**:
```markdown
ğŸ” LSP å½±éŸ¿åˆ†æçµæœ

å¤‰æ›´: updateUserProfile() ã®ã‚·ã‚°ãƒãƒãƒ£å¤‰æ›´

å½±éŸ¿ã‚’å—ã‘ã‚‹ç®‡æ‰€:
â”œâ”€â”€ src/pages/profile.tsx:89 âš ï¸ å¼•æ•°æ›´æ–°å¿…è¦
â”œâ”€â”€ src/pages/settings.tsx:145 âš ï¸ å¼•æ•°æ›´æ–°å¿…è¦
â”œâ”€â”€ tests/user.test.ts:67 âœ… æ›´æ–°æ¸ˆã¿
â””â”€â”€ src/api/admin.ts:23 âš ï¸ å¼•æ•°æ›´æ–°å¿…è¦

â†’ 3ç®‡æ‰€ã§å¼•æ•°ã®æ›´æ–°ãŒå¿…è¦
```

> **æ³¨**: LSP ã‚µãƒ¼ãƒãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹è¨€èªã§ã®ã¿å‹•ä½œã—ã¾ã™ã€‚

### Step 1: æ®‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆç¢ºèªï¼ˆCodex ãƒ¢ãƒ¼ãƒ‰æ™‚ï¼‰

Codex ãƒ¢ãƒ¼ãƒ‰ï¼ˆ`review.mode: codex`ï¼‰ã®å ´åˆã¯ã€**æ®‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒ 30%ä»¥ä¸‹ãªã‚‰ /compact ã‚’å…ˆã«å®Ÿè¡Œ**ã—ã¦ãã ã•ã„ã€‚

> **æ³¨æ„**: /compact å¾Œã‚‚ä½™è£•ãŒå°‘ãªã„å ´åˆã¯ç¸®é€€ã›ãšç¶šè¡Œã—ã¾ã™ã€‚

### Step 2: éå»ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜æ¤œç´¢ï¼ˆMemory-Enhancedï¼‰

Claude-mem ãŒæœ‰åŠ¹ãªå ´åˆã€ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹å‰ã«éå»ã®é¡ä¼¼æŒ‡æ‘˜ã‚’æ¤œç´¢:

```
# mem-search ã§éå»ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ã‚’æ¤œç´¢
mem-search: type:review "{å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¿ãƒ¼ãƒ³}"
mem-search: concepts:security "{ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é–¢é€£ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰}"
mem-search: concepts:gotcha "{å¤‰æ›´ç®‡æ‰€ã«é–¢é€£ã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰}"
```

**è¡¨ç¤ºä¾‹**:

```markdown
ğŸ“š éå»ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ï¼ˆé–¢é€£ã‚ã‚Šï¼‰

| æ—¥ä»˜ | æŒ‡æ‘˜å†…å®¹ | ãƒ•ã‚¡ã‚¤ãƒ« |
|------|---------|---------|
| 2024-01-15 | XSSè„†å¼±æ€§: innerHTML ä½¿ç”¨ç¦æ­¢ | src/components/*.tsx |
| 2024-01-20 | N+1ã‚¯ã‚¨ãƒª: prefetch å¿…é ˆ | src/api/*.ts |

ğŸ’¡ ä»Šå›ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ä¸Šè¨˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é‡ç‚¹ãƒã‚§ãƒƒã‚¯
```

> **æ³¨**: Claude-mem ãŒæœªè¨­å®šã®å ´åˆã€ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™ã€‚

## ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®é¸æŠ

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¹ã‚­ãƒ«ã¯ 2 ã¤ã®ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™:

```
è¨­å®šç¢ºèª: .claude-code-harness.config.yaml
    â†“
â”œâ”€â”€ review.mode: default â†’ Claude å˜ä½“ãƒ¬ãƒ“ãƒ¥ãƒ¼
â””â”€â”€ review.mode: codex   â†’ Codex ä¸¦åˆ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒ—ã”ã¨ã«4ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼‰
```

### Default ãƒ¢ãƒ¼ãƒ‰ï¼ˆClaude å˜ä½“ï¼‰

Claude ãŒç›´æ¥ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿè¡Œã€‚å°ã€œä¸­è¦æ¨¡ã®å¤‰æ›´ã«æœ€é©ã€‚

### Codex ãƒ¢ãƒ¼ãƒ‰ï¼ˆä¸¦åˆ—ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼‰

Codex MCP çµŒç”±ã§**ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸ4ã¤ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ**ã‚’ **å€‹åˆ¥ã«ä¸¦åˆ—å‘¼ã³å‡ºã—**:

| Review Type | ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆ |
|-------------|-------------|
| **Code Review** | Security, Performance, Quality, Accessibility |
| **Plan Review** | Clarity, Feasibility, Dependencies, Acceptance |
| **Scope Review** | Scope-creep, Priority, Feasibility, Impact |

#### âš ï¸ Codex ãƒ¢ãƒ¼ãƒ‰å®Ÿè¡Œæ™‚ã®å¿…é ˆãƒ«ãƒ¼ãƒ«

**çµ¶å¯¾ã«1å›ã® MCP å‘¼ã³å‡ºã—ã§è¤‡æ•°ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚’ã¾ã¨ã‚ãªã„ã“ã¨ã€‚**

```
âœ… æ­£ã—ã„: 4å›ã® MCP å‘¼ã³å‡ºã—ã‚’1ã¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…ã§ä¸¦åˆ—å®Ÿè¡Œ
âŒ é–“é•ã„: 1å›ã®å‘¼ã³å‡ºã—ã§ã€Œå…¨è¦³ç‚¹ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã€ã¨ä¾é ¼
```

**å®Ÿè¡Œæ‰‹é †**:
1. **å‘¼ã³å‡ºã™ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚’åˆ¤å®š**ï¼ˆå…¨éƒ¨ã§ã¯ãªãå¿…è¦ãªã‚‚ã®ã®ã¿ï¼‰:
   - è¨­å®šã§ `enabled: false` â†’ é™¤å¤–
   - CLI/ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ â†’ Accessibility, SEO é™¤å¤–
   - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã¿å¤‰æ›´ â†’ Quality, Architect, Plan Reviewer, Scope Analyst ã‚’å„ªå…ˆï¼ˆSecurity, Performance ã¯é™¤å¤–å¯ï¼‰
2. æœ‰åŠ¹ãªã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã® `experts/*.md` ã‹ã‚‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ **å€‹åˆ¥ã«èª­ã¿è¾¼ã‚€**
3. æœ‰åŠ¹ãªã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã®ã¿ `mcp__codex__codex` ã‚’ **1ã¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…ã§ä¸¦åˆ—å®Ÿè¡Œ**
4. å„çµæœã‚’çµ±åˆã—ã¦åˆ¤å®š

**è©³ç´°**: [codex-review/references/codex-parallel-review.md](../codex-review/references/codex-parallel-review.md)

**Codex ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–**:
```bash
/codex-mode on
```

**è©³ç´°**: [references/codex-integration.md](references/codex-integration.md)

---

## ä¸¦åˆ—ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•ï¼ˆDefault ãƒ¢ãƒ¼ãƒ‰ï¼‰

ä»¥ä¸‹ã®æ¡ä»¶ã‚’**ä¸¡æ–¹**æº€ãŸã™å ´åˆã€Task tool ã§ code-reviewer ã‚’ä¸¦åˆ—èµ·å‹•:

- ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ >= 2ï¼ˆä¾‹: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ + ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ï¼‰
- å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ« >= 5

**èµ·å‹•ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ1ã¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å†…ã§è¤‡æ•°ã® Task tool ã‚’åŒæ™‚å‘¼ã³å‡ºã—ï¼‰:**

```
Task tool ä¸¦åˆ—å‘¼ã³å‡ºã—:
  #1: subagent_type="code-reviewer"
      prompt="ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼: {files}"
  #2: subagent_type="code-reviewer"
      prompt="ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼: {files}"
  #3: subagent_type="code-reviewer"
      prompt="ã‚³ãƒ¼ãƒ‰å“è³ªè¦³ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼: {files}"
```

**å°è¦æ¨¡ãªå ´åˆï¼ˆæ¡ä»¶ã‚’æº€ãŸã•ãªã„ï¼‰:**
- å­ã‚¹ã‚­ãƒ«ï¼ˆdoc.mdï¼‰ã‚’é †æ¬¡èª­ã¿è¾¼ã‚“ã§ç›´åˆ—å®Ÿè¡Œ

---

## ğŸ”§ MCP Code Intelligence ãƒ„ãƒ¼ãƒ«ã®æ´»ç”¨

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã¯ MCP ãƒ„ãƒ¼ãƒ«ï¼ˆAST-Grep, LSPï¼‰ã‚’æ´»ç”¨ã—ã¦ç²¾åº¦ã‚’å‘ä¸Šã—ã¾ã™ã€‚

> **é‡è¦**: `/dev-tools-setup` ã§ MCP ã‚µãƒ¼ãƒãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€æ¨™æº–ãƒ„ãƒ¼ãƒ«ï¼ˆGrep, Readï¼‰ã§ã¯ãªã **MCP ãƒ„ãƒ¼ãƒ«ã‚’å„ªå…ˆä½¿ç”¨**ã—ã¦ãã ã•ã„ã€‚MCP ãƒ„ãƒ¼ãƒ«ã¯æ§‹é€ çš„ãªæ¤œç´¢ãŒå¯èƒ½ã§ã€ã‚ˆã‚Šæ­£ç¢ºãªçµæœã‚’å¾—ã‚‰ã‚Œã¾ã™ã€‚

### AST-Grep MCP ãƒ„ãƒ¼ãƒ«ï¼ˆharness_ast_searchï¼‰

**æ§‹é€ çš„ãªã‚³ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³æ¤œç´¢**ã«ä½¿ç”¨ã—ã¾ã™ã€‚æ­£è¦è¡¨ç¾ãƒ™ãƒ¼ã‚¹ã® Grep ã‚ˆã‚Šç²¾åº¦ãŒé«˜ãã€ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ¡ãƒ«æ¤œå‡ºã«æœ€é©ã§ã™ã€‚

| æ¤œå‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ | AST-Grep ãƒ‘ã‚¿ãƒ¼ãƒ³ | ç”¨é€” |
|-------------|------------------|------|
| Debug logs | `console.log($$$)` | ãƒªãƒªãƒ¼ã‚¹å‰ã®æ®‹ç•™ãƒ­ã‚°æ¤œå‡º |
| Empty catch | `catch ($ERR) { }` | ã‚¨ãƒ©ãƒ¼æ¡ã‚Šã¤ã¶ã—æ¤œå‡º |
| Unused async | `async function $NAME($$$) { $BODY }` | await ãªã— async æ¤œå‡º |
| Magic numbers | æ•°å€¤ãƒªãƒ†ãƒ©ãƒ«æ¤œç´¢ | ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰å®šæ•°æ¤œå‡º |

**ä½¿ç”¨ä¾‹**:
```
harness_ast_search pattern="console.log($$$)" language="typescript" path="src/"
harness_ast_search pattern="catch ($ERR) { }" language="typescript" path="src/"
```

**å‡ºåŠ›ä¾‹**:
```markdown
ğŸ” AST-Grep Code Smell Scan

Patterns checked:
- console.log($$$) â†’ Debug logs
- catch ($ERR) { } â†’ Empty catch blocks

Results:
â”œâ”€â”€ 3x console.log found (src/api/*.ts)
â”œâ”€â”€ 1x empty catch block (src/utils/error.ts:45)
â””â”€â”€ 0x unused async
```

> **æ³¨**: `harness_ast_search` ãŒåˆ©ç”¨ã§ããªã„å ´åˆã¯ã€`sg` ã‚³ãƒãƒ³ãƒ‰ï¼ˆBashï¼‰ã¾ãŸã¯ Grep ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¾ã™ã€‚

---

## ğŸ”§ LSP æ©Ÿèƒ½ã®æ´»ç”¨

ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã¯ LSPï¼ˆLanguage Server Protocolï¼‰ã‚’æ´»ç”¨ã—ã¦ç²¾åº¦ã‚’å‘ä¸Šã—ã¾ã™ã€‚

> **MCP ç‰ˆå„ªå…ˆ**: `harness_lsp_*` MCP ãƒ„ãƒ¼ãƒ«ãŒåˆ©ç”¨å¯èƒ½ãªå ´åˆã¯ã€æ¨™æº– LSP ãƒ„ãƒ¼ãƒ«ã‚ˆã‚Šå„ªå…ˆã—ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

### LSP ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«çµ±åˆ

| ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹ | LSP æ´»ç”¨æ–¹æ³• |
|-------------|-------------|
| **å“è³ª** | Diagnostics ã§å‹ã‚¨ãƒ©ãƒ¼ãƒ»æœªä½¿ç”¨å¤‰æ•°ã‚’è‡ªå‹•æ¤œå‡º |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** | Find-references ã§æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’è¿½è·¡ |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** | Go-to-definition ã§é‡ã„å‡¦ç†ã®å®Ÿè£…ã‚’ç¢ºèª |

### LSP Diagnostics ã®å‡ºåŠ›ä¾‹

```
ğŸ“Š LSP è¨ºæ–­çµæœ

| ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¨ãƒ©ãƒ¼ | è­¦å‘Š |
|---------|--------|------|
| src/components/Form.tsx | 0 | 2 |
| src/utils/api.ts | 1 | 0 |

âš ï¸ 1ä»¶ã®ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡º
â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§æŒ‡æ‘˜äº‹é …ã«è¿½åŠ 
```

### Find-references ã«ã‚ˆã‚‹å½±éŸ¿åˆ†æ

```
ğŸ” å¤‰æ›´å½±éŸ¿åˆ†æ

å¤‰æ›´: validateInput()

å‚ç…§ç®‡æ‰€:
â”œâ”€â”€ src/pages/signup.tsx:34
â”œâ”€â”€ src/pages/settings.tsx:56
â””â”€â”€ tests/validate.test.ts:12

â†’ ãƒ†ã‚¹ãƒˆã§ã‚«ãƒãƒ¼æ¸ˆã¿ âœ…
```

è©³ç´°: [docs/LSP_INTEGRATION.md](../../docs/LSP_INTEGRATION.md)

---

## VibeCoder å‘ã‘

```markdown
ğŸ“ ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ã‚’ä¾é ¼ã™ã‚‹ã¨ãã®è¨€ã„æ–¹

1. **ã€Œãƒã‚§ãƒƒã‚¯ã—ã¦ã€**
   - å…¨ä½“çš„ã«å•é¡ŒãŒãªã„ã‹è¦‹ã¦ã‚‚ã‚‰ã†

2. **ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¤§ä¸ˆå¤«ï¼Ÿã€**
   - æ‚ªæ„ã‚ã‚‹æ”»æ’ƒã«è€ãˆã‚‰ã‚Œã‚‹ã‹ãƒã‚§ãƒƒã‚¯

3. **ã€Œé…ããªã„ï¼Ÿã€**
   - é€Ÿåº¦ã«å•é¡ŒãŒãªã„ã‹ãƒã‚§ãƒƒã‚¯

4. **ã€Œèª°ã§ã‚‚ä½¿ãˆã‚‹ï¼Ÿã€**
   - éšœå®³ã®ã‚ã‚‹æ–¹ã§ã‚‚ä½¿ãˆã‚‹ã‹ãƒã‚§ãƒƒã‚¯

ğŸ’¡ ãƒ’ãƒ³ãƒˆ: ã€Œå…¨éƒ¨ãƒã‚§ãƒƒã‚¯ã—ã¦ã€ã¨è¨€ãˆã°ã€
4ã¤ã®è¦³ç‚¹ã™ã¹ã¦ã‚’è‡ªå‹•ã§ç¢ºèªã—ã¾ã™
```
