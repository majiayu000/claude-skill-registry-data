---
name: migration-upgrade
description: フレームワークのアップグレードや技術移行時に使用。
---

# Migration and Upgrade

## 📋 実行前チェック(必須)

### このスキルを使うべきか?
- [ ] フレームワーク・ライブラリを更新する?
- [ ] 技術スタックを移行する?
- [ ] 破壊的変更に対応する?
- [ ] ゼロダウンタイム移行を行う?

### 前提条件
- [ ] CHANGELOGを確認したか?
- [ ] Migration Guideを読んだか?
- [ ] 破壊的変更(Breaking Changes)を把握したか?
- [ ] ロールバック手順を用意したか?

### 禁止事項の確認
- [ ] バックアップなしで移行しようとしていないか?
- [ ] 一度に大きな変更をしようとしていないか?
- [ ] テストなしで本番に適用しようとしていないか?

---

## トリガー

- フレームワーク・ライブラリ更新時
- 技術スタック移行時
- 破壊的変更対応時
- ゼロダウンタイム移行時

---

## 🚨 鉄則

**大きな変更は小さなステップに。常にロールバック可能に。**

---

## 準備

```bash
# 現状確認
npm outdated

# 確認すべきドキュメント
□ CHANGELOG
□ Migration Guide
□ Breaking Changes
```

---

## 段階的移行

```
1. テスト環境で検証
2. ステージングで確認
3. 本番の一部で適用(カナリア)
4. 問題なければ全体に展開
5. 旧バージョンのクリーンアップ
```

---

## ロールバック準備

```bash
# パッケージのバックアップ
cp package-lock.json package-lock.json.backup

# Gitタグ
git tag pre-migration-v1.0.0
```

---

## 🚫 禁止事項まとめ

- バックアップなしの移行
- 一度に大きな変更
- テストなしの本番適用
- ロールバック手順なし
