---
name: eld-record-compact
description: |
  PCE (Process-Context Engine) のコンテキスト圧縮スキル。長期タスクの履歴を要約・圧縮し、セッション継続を可能にする。

  トリガー条件:
  - セッションが長くなった時
  - コンテキストウィンドウが逼迫した時
  - 「ここまでをまとめて」
  - 「ノートを作成して」
  - 複数セッションにまたがる作業の時
  - 「次回のために記録して」
---

# PCE Compact Skill

長期・反復で膨らむ履歴を要約/圧縮して、継続可能な状態を維持する。

## 圧縮の原則

1. **連続性保持**: 判断の経緯を失わない
2. **最小化**: 必要最小限に絞る
3. **構造化**: 検索・参照しやすい形式
4. **差分明示**: 何が変わったかを明確に

## 圧縮フォーマット

### セッションノート
```markdown
# Session Note: [日付/タスク名]

## 達成したこと
- [成果1]
- [成果2]

## 重要な決定
- [決定1]: [理由]

## 未解決・次回への引き継ぎ
- [ ] [TODO1]
- [ ] [TODO2]

## 参照すべきファイル
- [ファイル1]: [その役割]

## 注意点・懸念
- [懸念1]
```

### 進捗サマリー（長期プロジェクト用）
```markdown
# Progress: [プロジェクト名]

## Current State
[現在の状態を1-2文で]

## Completed Milestones
1. [マイルストーン1] - [日付]

## Active Context
- Goal: [現在の目標]
- Blockers: [阻害要因]
- Next: [次のアクション]
```

## 圧縮タイミング

| トリガー | アクション |
|---------|-----------|
| 50ターン経過 | セッションノート作成 |
| タスク完了 | 成果物と学びを記録 |
| セッション終了 | 次回用ノート作成 |
| 明示的依頼 | 即座に圧縮実行 |

## 使用例

```
User: ここまでの作業をまとめて

Claude:
# Session Note: 2024-12-21 認証機能実装

## 達成したこと
- JWT認証の基本実装完了
- ログイン/ログアウト実装
- 単体テスト作成 (80%カバレッジ)

## 重要な決定
- リフレッシュトークン7日有効: セキュリティとUXのバランス
- httpOnly Cookie使用: XSS対策

## 未解決
- [ ] トークンリフレッシュエンドポイント
- [ ] E2Eテスト

→ pce-memoryに保存完了
```
