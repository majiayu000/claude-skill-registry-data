---
name: refactoring
description: 当用户要求重构、清理代码、降低复杂度、消除重复或改善可维护性时使用。
---

# Refactoring Skill

## 适用范围
- 不改变功能的结构优化
- 复杂逻辑拆分与命名优化
- 重复逻辑抽取与简化

## 关键规则（Critical Rules）
- 行为不变，先保功能
- 小步提交，随时可回滚
- 每步都有验证（测试或可复现路径）
- 涉及表格 UI 时，保持紧凑行高规范（默认 th/td padding 6px 10px、line-height 1.2；表格内 Tag 紧凑化）

## 重构流程
1. 明确当前行为与问题点
2. 设计最小改动方案
3. 小步修改并验证
4. 复核命名与边界条件

## 常见切入点
- 过长函数：拆分为可复用小函数
- 重复逻辑：抽取到单一位置
- 复杂条件：使用早返回或拆分分支
- 魔法值：提取为具名常量

## 检查清单
- [ ] 行为一致且可验证
- [ ] 改动范围最小
- [ ] 命名更清晰、重复更少
- [ ] 表格行高与内边距保持紧凑统一
