---
name: creative-image-generator
description: Генерация рекламных изображений через Gemini. Используй для создания креативов с текстом.
---

# Creative Image Generator

Генерация рекламных изображений через Gemini 2.0 Flash Experimental.

---

## Workflow

### Шаг 1: Определи аккаунт
Спроси пользователя для какого аккаунта нужен креатив. Проверь список аккаунтов в `.claude/ads-agent/config/ad_accounts.md`

### Шаг 2: Прочитай бриф
**КРИТИЧНО:** Прочитай `.claude/ads-agent/config/briefs/{account}.md`

### Шаг 3: Собери тексты
Получи от пользователя или вызови `/creative-copywriter`:
- **offer** — заголовок (6-12 слов)
- **bullets** — 3 буллета через `\n`
- **profits** — выгода/бонус
- **cta** — призыв к действию

### Шаг 4: Спроси промпт
Узнай у пользователя:
- Какой стиль/настроение?
- Какие цвета?
- Какие объекты на фоне?
- Есть ли референс? (путь к изображению)

### Шаг 5: Генерируй
Вызови MCP tool `generate_creative_image()` с параметрами

### Шаг 6: Покажи результат
- Прочитай созданный файл через **Read tool** → покажи превью пользователю
- Выведи путь к файлу для открытия в Finder/Preview

### Шаг 7: Stories формат (опционально)
Если нужен 9:16 Stories → вызови `expand_to_stories()`

---

## MCP Tools

### `generate_creative_image`

Генерация 4:5 креатива (1080×1350).

**Параметры:**
- `prompt` — стиль, цвета, объекты, настроение
- `offer` — заголовок
- `bullets` — 3 буллета через `\n`
- `profits` — выгода
- `cta` — призыв (default: "Узнать больше")
- `reference_image_path` — (optional) путь к референсу
- `output_dir` — (optional) директория для сохранения

**Результат:** JSON с `file_path` к PNG файлу

### `expand_to_stories`

Расширение 4:5 до 9:16 через outpainting.

**Параметры:**
- `image_path` — путь к 4:5 изображению
- `output_path` — (optional) путь для результата

**Результат:** JSON с `file_path` к PNG файлу 9:16

---

## Референсы

Пользователь может приложить изображение-референс для стиля:
- Передай путь в `reference_image_path`
- Gemini возьмёт цвета, композицию, настроение из референса
- Тексты будут добавлены поверх в стиле референса

---

## Просмотр результата

После генерации:
1. **Read tool** — покажи превью в чате (Claude Code multimodal)
2. **Путь к файлу** — пользователь откроет в Finder/Preview
3. Файл сохраняется в рабочую директорию

---

## Требования

- **GEMINI_API_KEY** — переменная окружения с API ключом Gemini
- **google-generativeai** — Python пакет (`pip install google-generativeai`)

---

## Пример workflow

**Запрос:** "Сгенерируй креатив для bas_dent про имплантацию"

**Действия:**
1. Читаю бриф `.claude/ads-agent/config/briefs/bas_dent.md`
2. Спрашиваю тексты или вызываю `/creative-copywriter`
3. Спрашиваю стиль:
   - "Какой стиль? (минимализм, UGC, яркий...)"
   - "Какие цвета? (синий, белый...)"
   - "Есть референс?"
4. Вызываю `generate_creative_image()`
5. Читаю файл через Read → показываю превью
6. Спрашиваю: "Нужен Stories формат 9:16?"
7. Если да → `expand_to_stories()`
