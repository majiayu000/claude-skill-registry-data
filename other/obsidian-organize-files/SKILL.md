---
name: obsidian-organize-files
description: >
  Automatically organize Obsidian files and folders by analyzing content and tags,
  moving files from Inbox to appropriate folders and organizing Clippings root files
  into proper subfolders. Use when: organizing Obsidian vault, cleaning up Inbox,
  or reorganizing Clippings folder structure.
---

# Obsidianファイル・フォルダー整理 Skill

## このSkillを使うべきタイミング

- Obsidianのファイル・フォルダー整理が必要なとき:
  - `01_Inbox/` フォルダ内に未整理ファイルが蓄積している
  - `02_Clippings/` ルート直下に未分類ファイルが多数ある
  - 定期的な整理作業（週次・月次）を実行したい
  - ユーザーが「Obsidianファイル整理して」「フォルダー整理して」と依頼したとき

## 前提ルール（必ず守ること）

1. **ファイル組織化ルールの準拠**
   - `01_Inbox/Obsidian Rule/02_File_Organization.md` のルールに従う
   - 既存のフォルダ構造を尊重し、無闇に新規フォルダを作成しない

2. **フォルダ構造の理解**
   - `01_Inbox/`: 受信箱・未処理ファイル
   - `02_Clippings/`: ウェブクリッピング（サブフォルダで分類）
   - `03_Notes/`: ノート・知識（日報・メモなど）
   - `99_Archive/`: アーカイブ・テストファイル

3. **ファイル移動の原則**
   - 内容とタグに基づいて適切なフォルダに移動
   - 既存のYAML front matterを保持
   - ファイル名は変更しない（移動のみ）

4. **分類基準**
   - タグの内容から判断
   - ファイルのタイトルと本文の内容から判断
   - フォルダ名のパターンに従う

## 基本フロー

### Phase 1: 現状分析

1. **組織化ルールの読み込み**
   - `01_Inbox/Obsidian Rule/02_File_Organization.md` を読み込む
   - フォルダ構造と移動ルールを理解する

2. **Inbox内のファイルスキャン**
   - `01_Inbox/**/*.md` を検索
   - 各ファイルの内容とタグを分析
   - 移動先候補を決定

3. **02_Clippingsルートのファイルスキャン**
   - `02_Clippings/*.md`（ルート直下）を検索
   - 各ファイルのタグと内容を分析
   - 適切なサブフォルダを決定

### Phase 2: 分類ルールの適用

#### Inbox内のファイル分類

- **日報・メモ・フォーム回答** → `03_Notes/Notes/`
- **テストファイル・一時ファイル** → `99_Archive/`
- **クリッピングファイル** → `02_Clippings/` の適切なサブフォルダ

#### 02_Clippingsルートのファイル分類

**プロダクト開発関連**
- NotebookLM関連 → `3_プロダクト開発_NotebookLM/`
- AI活用関連:
  - Cursor/Claude Code → `3_プロダクト開発_AI活用_Cursor/`
  - GPT関連 → `3_プロダクト開発_AI活用_GPT/`
  - プロンプト関連 → `3_プロダクト開発_AI活用_プロンプト/`
  - Dify → `3_プロダクト開発_AI活用_Dify/`
  - MCP → `3_プロダクト開発_AI活用_MCP/`
- コード・エンジニア基礎 → `3_プロダクト開発_コード_エンジニア基礎/`
- Python → `3_プロダクト開発_コード_Python/`
- 個人開発 → `3_プロダクト開発_個人開発/`
- Notion → `3_プロダクト開発_Notion/`
- Obsidian → `3_プロダクト開発_Obsidian/`

**キャリア関連**
- シニア事例（40代以上、経営層） → `4_キャリア_事例_シニア/` または `4_キャリア_事例_経営層/`
- 若手事例（20-30代） → `4_キャリア_事例_若手/`
- デザイナー事例 → `4_キャリア_事例_デザイナー/`
- 独立・起業事例 → `4_キャリア_事例_独立企業/`
- 就活関連 → `4_キャリア_就活/`

**ビジネス関連**
- マインド・行動・自己成長 → `5_ビジネス_マインド_行動/`
- 経営・戦略 → `5_ビジネス_経営_戦略/`
- スタートアップ → `5_ビジネス_経営_スタートアップ/`
- CEO/CxO → `5_ビジネス_経営_CEO/` または `5_ビジネス_経営_CxO/`
- MBA → `5_ビジネス_経営_MBA/`
- 職種別:
  - マーケティング（林） → `5_ビジネス_職種_マーケ_林/`
  - SNS運用 → `5_ビジネス_職種_マーケ_SNS運用/`
  - PdM → `5_ビジネス_職種_PdM/`
  - 一人企業 → `5_ビジネス_職種_一人企業/`
  - 企業事例 → `5_ビジネス_職種_企業事例/`

**コレクション関連**
- 生活Tips → `1_コレクション_生活Tips/`
- 興味・海外 → `1_コレクション_興味_海外/`
- 興味・コーヒー → `1_コレクション_興味_コーヒー/`
- 興味・投資 → `1_コレクション_興味_投資/`
- プロダクト・IT → `1_コレクション_プロダクト_IT/`
- プロダクト・ブランド → `1_コレクション_プロダクト_ブランド/`
- 書籍 → `1_コレクション_書籍/`

**デザイン関連**
- UIデザイン → `2_デザイン_UI_*/`（ツール/Figma/ノウハウTips/事例まとめ/事例単品）
- UXデザイン → `2_デザイン_UX/`
- ブランディング → `2_デザイン_ブランディング/`

### Phase 3: 実行

1. **整理計画の生成**
   - 各ファイルの移動先を決定
   - 移動ファイル一覧を作成
   - 新規フォルダが必要か判断（基本的には既存フォルダを使用）

2. **ユーザー確認（自動分類モードの場合）**
   - 整理計画を提示
   - ユーザーの承認を得る（または自動実行）

3. **ファイル移動の実行**
   - `mv` コマンドでファイルを移動
   - 特殊文字を含むファイル名は適切にエスケープ
   - エラーが発生した場合は代替方法を試行

4. **整理レポートの生成**
   - `Flow/YYYY-MM-DD/obsidian_organization/report.md` に保存
   - 移動ファイル一覧、フォルダ構造変更、次回推奨アクションを含める

## 分類判断の具体例

### タグから判断する例

- タグ: `["notebooklm", "スライド", "デザイン"]` → `3_プロダクト開発_NotebookLM/`
- タグ: `["ai活用", "claude code", "エージェント"]` → `3_プロダクト開発_AI活用_Cursor/`
- タグ: `["キャリア", "転職", "人生設計"]` → `4_キャリア_事例_若手/` または `4_キャリア_事例_シニア/`（内容で判断）
- タグ: `["ビジネス", "スタートアップ", "エージェント"]` → `5_ビジネス_経営_スタートアップ/`
- タグ: `["言語化", "コミュニケーション", "自己成長"]` → `5_ビジネス_マインド_行動/`

### タイトルから判断する例

- 「NotebookLMでの...」 → `3_プロダクト開発_NotebookLM/`
- 「Claude Codeの...」 → `3_プロダクト開発_AI活用_Cursor/`
- 「40歳、弁護士15年目...」 → `4_キャリア_事例_シニア/`
- 「20代が...」 → `4_キャリア_事例_若手/`
- 「ビジネスモデル...」 → `5_ビジネス_経営_戦略/`
- 「やって良かったこと...」 → `1_コレクション_生活Tips/`

## 実行手順（詳細）

1. **現状確認**
   ```bash
   # Inbox内のファイル数確認
   find 01_Inbox -type f -name "*.md" | wc -l
   
   # 02_Clippingsルートのファイル数確認
   find 02_Clippings -maxdepth 1 -type f -name "*.md" | wc -l
   ```

2. **組織化ルールの読み込み**
   - `01_Inbox/Obsidian Rule/02_File_Organization.md` を読み込む

3. **ファイル分析**
   - 各ファイルのYAML front matter（特に`tags`）を確認
   - タイトルと本文の冒頭を読み、内容を把握

4. **移動先決定**
   - タグと内容から適切なサブフォルダを決定
   - 既存のフォルダ構造を確認し、存在するフォルダを使用

5. **ファイル移動**
   ```bash
   # 基本的な移動コマンド
   mv "source/path/file.md" "destination/path/"
   
   # 特殊文字を含むファイル名の場合
   find source -name "*特殊文字*" -exec mv {} destination/ \;
   ```

6. **整理レポート生成**
   - `Flow/YYYY-MM-DD/obsidian_organization/` ディレクトリを作成
   - `report.md` と `maintenance_schedule.md` を生成

## 注意点・アンチパターン

1. **新規フォルダの作成**
   - 基本的には既存フォルダを使用する
   - 新規フォルダが必要な場合は、ユーザーに確認する

2. **ファイル名の変更**
   - ファイル名は変更しない（移動のみ）
   - 既存のYAML front matterを保持する

3. **リンクの破損**
   - ファイル移動後、内部リンクが壊れていないか確認を推奨
   - ただし、このSkillではリンク修復は行わない

4. **重複ファイル**
   - 重複ファイルの検出は行わない（別途対応が必要）

5. **エラーハンドリング**
   - ファイル移動でエラーが発生した場合:
     - 特殊文字を含むファイル名は `find -exec` を使用
     - 移動先フォルダが存在しない場合は作成（ユーザー確認後）

## 出力フォーマット

整理完了後、以下の情報を出力する:

1. **整理結果サマリー**
   - 移動ファイル数
   - 整理対象フォルダ
   - 使用フォルダ数
   - エラー件数

2. **整理レポートの保存先**
   - `Flow/YYYY-MM-DD/obsidian_organization/report.md`

3. **品質チェック項目**
   - 全ファイルが適切なフォルダに配置されているか
   - フォルダ命名規則に準拠しているか
   - 未整理ファイルが0件になったか

## 実装例（実際の実行フロー）

### 自動分類モードでの実行例

1. ユーザーが「Obsidianファイル整理して」と依頼
2. このSkillが自動的に起動
3. Inboxと02_Clippingsルートをスキャン
4. 各ファイルの内容とタグを分析
5. 適切な移動先を決定
6. ファイル移動を実行
7. 整理レポートを生成
8. 結果をユーザーに報告

### 分類判断のロジック

```python
# 疑似コード（実際の実装ではない）

def classify_file(file_path, tags, title, content):
    # NotebookLM関連
    if "notebooklm" in tags or "NotebookLM" in title:
        return "3_プロダクト開発_NotebookLM/"
    
    # AI活用関連
    if "claude code" in tags or "Claude Code" in title:
        return "3_プロダクト開発_AI活用_Cursor/"
    if "ai活用" in tags or "AI" in title:
        # 内容でさらに細分化
        if "プロンプト" in content:
            return "3_プロダクト開発_AI活用_プロンプト/"
        return "3_プロダクト開発_AI活用_GPT/"
    
    # キャリア関連
    if "キャリア" in tags or "転職" in tags:
        if "40" in title or "シニア" in content:
            return "4_キャリア_事例_シニア/"
        if "20代" in title or "若手" in content:
            return "4_キャリア_事例_若手/"
    
    # ビジネス関連
    if "ビジネス" in tags or "スタートアップ" in tags:
        if "マインド" in tags or "行動" in tags:
            return "5_ビジネス_マインド_行動/"
        if "経営" in tags or "戦略" in tags:
            return "5_ビジネス_経営_戦略/"
    
    # デフォルト: 内容をさらに分析
    return analyze_content_for_folder(content)
```

## ベストプラクティス

1. **定期的な整理**
   - 週次: Inboxフォルダのクリアリング
   - 月次: 全体の再整理とアーカイブ処理

2. **自動化の活用**
   - Obsidian Clippings自動整理スクリプトとの連携
   - 週次自動実行の設定

3. **整理レポートの活用**
   - 整理履歴を残すことで、パターンを把握
   - 次回整理時の参考にする

4. **ユーザー確認のタイミング**
   - 大量のファイル移動（50件以上）の場合は確認を取る
   - 新規フォルダ作成が必要な場合は確認を取る

## 参考資料

- ファイル組織化ルール: `01_Inbox/Obsidian Rule/02_File_Organization.md`
- タグ付けルール: `02_Clippings/0_Index/tag_rule.md`
- フォルダ構造: `02_Clippings/0_Index/folder_index.md`
- 整理レポート例: `Flow/2025-12-25/obsidian_organization/report.md`

