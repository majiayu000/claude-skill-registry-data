---
name: script-development
description: ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™ºã‚¬ã‚¤ãƒ‰ã€‚Shellã€Pythonã€Node.jsã‚¹ã‚¯ãƒªãƒ—ãƒˆã€è‡ªå‹•åŒ–ã€ãƒãƒƒãƒå‡¦ç†ã€ç’°å¢ƒå¤‰æ•°ç®¡ç†ãªã©ã€åŠ¹ç‡çš„ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€‚
---

# Script Development Skill

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã„ã¤ä½¿ã†ã‹](#ã„ã¤ä½¿ã†ã‹)
3. [Shell ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](#shellã‚¹ã‚¯ãƒªãƒ—ãƒˆ)
4. [Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](#pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆ)
5. [Node.js ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](#nodejsã‚¹ã‚¯ãƒªãƒ—ãƒˆ)
6. [ç’°å¢ƒå¤‰æ•°ç®¡ç†](#ç’°å¢ƒå¤‰æ•°ç®¡ç†)
7. [å®Ÿè·µä¾‹](#å®Ÿè·µä¾‹)
8. [Agenté€£æº](#agenté€£æº)

---

## æ¦‚è¦

ã“ã®Skillã¯ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™ºã‚’ã‚«ãƒãƒ¼ã—ã¾ã™ï¼š

- **Shell ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** - Bash/Zsh
- **Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** - è‡ªå‹•åŒ–ã€ãƒ‡ãƒ¼ã‚¿å‡¦ç†
- **Node.js ã‚¹ã‚¯ãƒªãƒ—ãƒˆ** - TypeScript/JavaScript
- **ç’°å¢ƒå¤‰æ•°ç®¡ç†** - .envã€dotenv
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** - é©åˆ‡ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
- **ãƒ­ã‚°å‡ºåŠ›** - å®Ÿè¡Œãƒ­ã‚°è¨˜éŒ²

## ğŸ“š å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

**ã“ã®ã‚¬ã‚¤ãƒ‰ã§å­¦ã¹ã‚‹ã“ã¨**: Shell/Python/Node.jsã‚¹ã‚¯ãƒªãƒ—ãƒˆã®åŸºæœ¬æ–‡æ³•ã€è‡ªå‹•åŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ç’°å¢ƒå¤‰æ•°ç®¡ç†ã€ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
**å…¬å¼ã§ç¢ºèªã™ã¹ãã“ã¨**: æœ€æ–°ã®è¨€èªæ©Ÿèƒ½ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ

### ä¸»è¦ãªå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[Bash Reference Manual](https://www.gnu.org/software/bash/manual/)** - Bashå…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹
  - [Shell Builtin Commands](https://www.gnu.org/software/bash/manual/html_node/Shell-Builtin-Commands.html)
  - [Shell Parameters](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameters.html)

- **[Python Documentation](https://docs.python.org/3/)** - Pythonå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - [argparse](https://docs.python.org/3/library/argparse.html)
  - [pathlib](https://docs.python.org/3/library/pathlib.html)

- **[Node.js Documentation](https://nodejs.org/docs/)** - Node.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
  - [fs module](https://nodejs.org/api/fs.html)
  - [process module](https://nodejs.org/api/process.html)

- **[Commander.js](https://github.com/tj/commander.js)** - Node.js CLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

### é–¢é€£ãƒªã‚½ãƒ¼ã‚¹

- **[ShellCheck](https://www.shellcheck.net/)** - Shellã‚¹ã‚¯ãƒªãƒ—ãƒˆã®é™çš„è§£æãƒ„ãƒ¼ãƒ«
- **[Python Click](https://click.palletsprojects.com/)** - Pythonã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **[Google Shell Style Guide](https://google.github.io/styleguide/shellguide.html)** - Shellã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰

---

## ã„ã¤ä½¿ã†ã‹

### ğŸ¯ å¿…é ˆã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- [ ] ç¹°ã‚Šè¿”ã—ä½œæ¥­ã®è‡ªå‹•åŒ–æ™‚
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆæ™‚
- [ ] ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆæ™‚
- [ ] å®šæœŸå®Ÿè¡Œãƒãƒƒãƒä½œæˆæ™‚

---

## Shell ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### åŸºæœ¬æ§‹æ–‡

```bash
#!/bin/bash

# å¤‰æ•°
NAME="John"
echo "Hello, $NAME"

# ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°
echo "First arg: $1"
echo "All args: $@"
echo "Number of args: $#"

# æ¡ä»¶åˆ†å²
if [ "$1" = "production" ]; then
  echo "Production mode"
elif [ "$1" = "development" ]; then
  echo "Development mode"
else
  echo "Unknown mode"
fi

# ãƒ«ãƒ¼ãƒ—
for file in *.txt; do
  echo "Processing $file"
done

# é–¢æ•°
function greet() {
  local name=$1
  echo "Hello, $name"
}

greet "Alice"

# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
set -e  # ã‚¨ãƒ©ãƒ¼æ™‚ã«çµ‚äº†
set -u  # æœªå®šç¾©å¤‰æ•°ä½¿ç”¨æ™‚ã«ã‚¨ãƒ©ãƒ¼
set -o pipefail  # ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å†…ã®ã‚¨ãƒ©ãƒ¼ã‚’æ¤œçŸ¥

# ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œçµæœã®å–å¾—
CURRENT_BRANCH=$(git branch --show-current)
echo "Current branch: $CURRENT_BRANCH"
```

### å®Ÿç”¨ä¾‹ï¼šãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash

# deploy.sh
set -euo pipefail

ENV=${1:-development}

echo "ğŸš€ Deploying to $ENV..."

# ãƒ“ãƒ«ãƒ‰
echo "ğŸ“¦ Building..."
npm run build

# ãƒ†ã‚¹ãƒˆ
echo "ğŸ§ª Running tests..."
npm test

# ãƒ‡ãƒ—ãƒ­ã‚¤
if [ "$ENV" = "production" ]; then
  echo "ğŸŒ Deploying to production..."
  ssh user@server 'cd /var/www && git pull && pm2 restart app'
else
  echo "ğŸ”§ Deploying to development..."
  ssh user@dev-server 'cd /var/www && git pull && pm2 restart app'
fi

echo "âœ… Deploy complete!"
```

---

## Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### åŸºæœ¬æ§‹æ–‡

```python
#!/usr/bin/env python3

import sys
import os
from pathlib import Path

def main():
    # ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°
    if len(sys.argv) < 2:
        print("Usage: script.py <file>")
        sys.exit(1)

    file_path = sys.argv[1]

    # ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ç¢ºèª
    if not Path(file_path).exists():
        print(f"Error: {file_path} does not exist")
        sys.exit(1)

    # ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†
    with open(file_path, 'r') as f:
        content = f.read()
        print(f"File size: {len(content)} bytes")

if __name__ == "__main__":
    main()
```

### argparseï¼ˆæ¨å¥¨ï¼‰

```python
#!/usr/bin/env python3

import argparse
from pathlib import Path

def process_file(file_path: Path, output: Path | None, verbose: bool):
    if verbose:
        print(f"Processing {file_path}...")

    with open(file_path, 'r') as f:
        content = f.read()

    # å‡¦ç†
    result = content.upper()

    if output:
        with open(output, 'w') as f:
            f.write(result)
        if verbose:
            print(f"Saved to {output}")
    else:
        print(result)

def main():
    parser = argparse.ArgumentParser(description='Process a file')
    parser.add_argument('input', type=Path, help='Input file path')
    parser.add_argument('-o', '--output', type=Path, help='Output file path')
    parser.add_argument('-v', '--verbose', action='store_true', help='Verbose output')

    args = parser.parse_args()

    if not args.input.exists():
        parser.error(f"{args.input} does not exist")

    process_file(args.input, args.output, args.verbose)

if __name__ == "__main__":
    main()

# ä½¿ç”¨ä¾‹:
# python script.py input.txt
# python script.py input.txt -o output.txt -v
```

### ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
#!/usr/bin/env python3

import pandas as pd
import argparse
from pathlib import Path

def process_csv(input_path: Path, output_path: Path):
    # CSVèª­ã¿è¾¼ã¿
    df = pd.read_csv(input_path)

    # ãƒ‡ãƒ¼ã‚¿å‡¦ç†
    df['total'] = df['price'] * df['quantity']
    df_filtered = df[df['total'] > 1000]

    # å‡ºåŠ›
    df_filtered.to_csv(output_path, index=False)
    print(f"âœ… Processed {len(df)} rows â†’ {len(df_filtered)} rows")

def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('input', type=Path)
    parser.add_argument('output', type=Path)
    args = parser.parse_args()

    process_csv(args.input, args.output)

if __name__ == "__main__":
    main()
```

---

## Node.js ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

### åŸºæœ¬æ§‹æ–‡ï¼ˆTypeScriptï¼‰

```typescript
#!/usr/bin/env ts-node

import { readFileSync, writeFileSync } from 'fs'
import { program } from 'commander'

program
  .name('process-file')
  .description('Process a file')
  .argument('<input>', 'Input file path')
  .option('-o, --output <path>', 'Output file path')
  .option('-v, --verbose', 'Verbose output')
  .action((input, options) => {
    if (options.verbose) {
      console.log(`Processing ${input}...`)
    }

    const content = readFileSync(input, 'utf-8')
    const result = content.toUpperCase()

    if (options.output) {
      writeFileSync(options.output, result)
      if (options.verbose) {
        console.log(`Saved to ${options.output}`)
      }
    } else {
      console.log(result)
    }
  })

program.parse()

// package.json
{
  "scripts": {
    "process": "ts-node src/process.ts"
  },
  "bin": {
    "process-file": "./dist/process.js"
  }
}
```

### ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

```typescript
import fs from 'fs/promises'
import path from 'path'

async function processFiles(dirPath: string) {
  try {
    // ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§å–å¾—
    const files = await fs.readdir(dirPath)

    for (const file of files) {
      const filePath = path.join(dirPath, file)
      const stat = await fs.stat(filePath)

      if (stat.isFile() && file.endsWith('.txt')) {
        // ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†
        const content = await fs.readFile(filePath, 'utf-8')
        const processed = content.toUpperCase()

        await fs.writeFile(filePath, processed)
        console.log(`Processed: ${file}`)
      }
    }
  } catch (error) {
    console.error('Error:', error)
    process.exit(1)
  }
}

processFiles('./data')
```

### APIå‘¼ã³å‡ºã—

```typescript
import axios from 'axios'

async function fetchUsers() {
  try {
    const response = await axios.get('https://api.example.com/users', {
      headers: {
        'Authorization': `Bearer ${process.env.API_TOKEN}`
      }
    })

    console.log(`Fetched ${response.data.length} users`)

    // CSVã«å‡ºåŠ›
    const csv = response.data
      .map((user: any) => `${user.id},${user.name},${user.email}`)
      .join('\n')

    await fs.writeFile('users.csv', `id,name,email\n${csv}`)
    console.log('âœ… Saved to users.csv')
  } catch (error) {
    console.error('Error:', error)
    process.exit(1)
  }
}

fetchUsers()
```

---

## ç’°å¢ƒå¤‰æ•°ç®¡ç†

### .env ãƒ•ã‚¡ã‚¤ãƒ«

```bash
# .env
DATABASE_URL=postgresql://localhost:5432/mydb
API_KEY=your_api_key_here
NODE_ENV=development
```

### Node.jsï¼ˆdotenvï¼‰

```typescript
import 'dotenv/config'

console.log(process.env.DATABASE_URL)
console.log(process.env.API_KEY)

// å¿…é ˆãƒã‚§ãƒƒã‚¯
const requiredEnvVars = ['DATABASE_URL', 'API_KEY']

for (const envVar of requiredEnvVars) {
  if (!process.env[envVar]) {
    console.error(`Error: ${envVar} is not set`)
    process.exit(1)
  }
}
```

### Pythonï¼ˆpython-dotenvï¼‰

```python
from dotenv import load_dotenv
import os

load_dotenv()

DATABASE_URL = os.getenv('DATABASE_URL')
API_KEY = os.getenv('API_KEY')

# å¿…é ˆãƒã‚§ãƒƒã‚¯
required_env_vars = ['DATABASE_URL', 'API_KEY']

for env_var in required_env_vars:
    if not os.getenv(env_var):
        print(f"Error: {env_var} is not set")
        exit(1)
```

### Shell

```bash
#!/bin/bash

# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿
if [ -f .env ]; then
  export $(cat .env | grep -v '^#' | xargs)
fi

echo "DATABASE_URL: $DATABASE_URL"
```

---

## å®Ÿè·µä¾‹

### Example 1: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆPythonï¼‰

```python
#!/usr/bin/env python3

import psycopg2
from dotenv import load_dotenv
import os
import sys

load_dotenv()

def migrate_data():
    # æ¥ç¶š
    conn = psycopg2.connect(os.getenv('DATABASE_URL'))
    cur = conn.cursor()

    try:
        # ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
        cur.execute("""
            INSERT INTO new_users (id, name, email)
            SELECT id, name, email FROM old_users
            WHERE migrated = false
        """)

        # ãƒ•ãƒ©ã‚°æ›´æ–°
        cur.execute("UPDATE old_users SET migrated = true")

        conn.commit()
        print(f"âœ… Migrated {cur.rowcount} rows")

    except Exception as e:
        conn.rollback()
        print(f"âŒ Error: {e}")
        sys.exit(1)

    finally:
        cur.close()
        conn.close()

if __name__ == "__main__":
    migrate_data()
```

### Example 2: å®šæœŸãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆShellï¼‰

```bash
#!/bin/bash

# backup.sh
set -euo pipefail

BACKUP_DIR="/var/backups/db"
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_FILE="$BACKUP_DIR/backup_$DATE.sql.gz"

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p "$BACKUP_DIR"

# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Ÿè¡Œ
echo "ğŸ“¦ Creating backup..."
pg_dump -U postgres mydb | gzip > "$BACKUP_FILE"

echo "âœ… Backup saved: $BACKUP_FILE"

# å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤ï¼ˆ7æ—¥ä»¥ä¸Šå‰ï¼‰
find "$BACKUP_DIR" -name "backup_*.sql.gz" -mtime +7 -delete
echo "ğŸ—‘ï¸  Old backups deleted"

# crontabã§æ¯æ—¥å®Ÿè¡Œ
# 0 2 * * * /path/to/backup.sh >> /var/log/backup.log 2>&1
```

---

## Agenté€£æº

### ğŸ“– Agentã¸ã®æŒ‡ç¤ºä¾‹

**Shell ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ**
```
ä»¥ä¸‹ã‚’è¡Œã†Shell ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š
1. GitHubã‹ã‚‰æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’pull
2. npmãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
3. PM2ã§ã‚¢ãƒ—ãƒªå†èµ·å‹•
4. ã‚¨ãƒ©ãƒ¼æ™‚ã¯é€šçŸ¥
```

**Python ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ**
```
CSV ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€ä»¥ä¸‹ã®å‡¦ç†ã‚’è¡Œã†Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š
- priceã¨quantityã‹ã‚‰totalã‚’è¨ˆç®—
- total > 1000ã®è¡Œã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- çµæœã‚’æ–°ã—ã„CSV ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›
```

---

## ã¾ã¨ã‚

### ã‚¹ã‚¯ãƒªãƒ—ãƒˆé–‹ç™ºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** - set -eï¼ˆShellï¼‰ã€try-catchï¼ˆPython/Node.jsï¼‰
2. **ç’°å¢ƒå¤‰æ•°** - .envãƒ•ã‚¡ã‚¤ãƒ«ã§ç®¡ç†
3. **å¼•æ•°ãƒ‘ãƒ¼ã‚¹** - argparseï¼ˆPythonï¼‰ã€commanderï¼ˆNode.jsï¼‰
4. **ãƒ­ã‚°å‡ºåŠ›** - å®Ÿè¡ŒçŠ¶æ³ã‚’è¨˜éŒ²

---

_Last updated: 2025-12-24_
