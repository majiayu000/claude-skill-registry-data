---
name: plan-mode
description: AEGISãƒ¢ãƒ‡ãƒ«ã®ARC-Challengeæ”¹å–„ã€GSM8Kå¥å…¨æ€§æ¤œè¨¼ã€GRPOå ±é…¬å¤šç›®çš„åŒ–ã®ãŸã‚ã®åŒ…æ‹¬çš„Planãƒ¢ãƒ¼ãƒ‰ã€‚é ‘å¥ãªå›ç­”æŠ½å‡ºã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæœ€é©åŒ–ã€ãƒ‡ãƒ¼ã‚¿æ±šæŸ“ãƒã‚§ãƒƒã‚¯ã€è¤‡æ•°seedè©•ä¾¡ã€æ±åŒ–æ€§èƒ½å‘ä¸Šã‚’å®Ÿè£…ã€‚
---

# Planãƒ¢ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ«: AEGISãƒ¢ãƒ‡ãƒ«æ”¹å–„ç·åˆè¨ˆç”»

AEGISãƒ¢ãƒ‡ãƒ«ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ€§èƒ½ã‚’ç§‘å­¦çš„ã«æ”¹å–„ã™ã‚‹ãŸã‚ã®åŒ…æ‹¬çš„Planãƒ¢ãƒ¼ãƒ‰ã€‚ABCãƒ†ã‚¹ãƒˆçµæœã«åŸºã¥ãã€ARC-Challengeã€GSM8Kã€GRPOå ±é…¬ã®3ã¤ã®å„ªå…ˆé ˜åŸŸã‚’ä½“ç³»çš„ã«æ”¹å–„ã—ã¾ã™ã€‚

## ğŸ¯ ä¸»è¦æ©Ÿèƒ½

### 1. ARC-Challengeæ”¹å–„ã‚·ã‚¹ãƒ†ãƒ 
- **é ‘å¥ãªå›ç­”æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯**: è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å¿œã®æŠ½å‡ºé–¢æ•°
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæœ€é©åŒ–**: 180ç§’â†’240ç§’ã¸ã®å»¶é•·ã¨å‹•çš„èª¿æ•´
- **å½¢å¼çµ±ä¸€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: å¿œç­”å½¢å¼ã®ä¸€è²«æ€§ç¢ºä¿

### 2. GSM8Kå¥å…¨æ€§æ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- **ãƒ‡ãƒ¼ã‚¿æ±šæŸ“ãƒã‚§ãƒƒã‚¯**: å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã®é‡è¤‡æ¤œæŸ»
- **è¤‡æ•°seedå®‰å®šæ€§è©•ä¾¡**: 8-shotä¾å­˜åº¦ã®æ¤œè¨¼
- **0-shotæ€§èƒ½ç¢ºèª**: few-shotãƒã‚¤ã‚¢ã‚¹ã®è©•ä¾¡

### 3. GRPOå ±é…¬å¤šç›®çš„åŒ–ã‚·ã‚¹ãƒ†ãƒ 
- **ARC/MATHå½¢å¼å ±é…¬**: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯åˆ¥å°‚ç”¨å ±é…¬è¨­è¨ˆ
- **GSM8Kå ±é…¬é‡ã¿èª¿æ•´**: éåº¦æœ€é©åŒ–ã®é˜²æ­¢
- **æ±åŒ–æ€§èƒ½å‘ä¸Š**: å¤šæ§˜ãªæ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç²å¾—

### 4. AEGIS v2.5çµ±åˆã‚·ã‚¹ãƒ†ãƒ 
- **Arxiv/Biorxivçµ±åˆ**: å¼•ç”¨ä¸Šä½è«–æ–‡ã®æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿å­¦ç¿’
- **ç¾¤è¡¨ç¾Transformer**: æ•°å­¦çš„æ§‹é€ ç†è§£ã®å¼·åŒ–
- **ãƒ„ãƒ¼ãƒ«ã‚³ãƒ¼ãƒªãƒ³ã‚°å‘ä¸Š**: MCP/RALCogå¯¾å¿œèƒ½åŠ›ç²å¾—

## ğŸ“‹ ä½¿ç”¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### ã‚¹ãƒ†ãƒƒãƒ—1: ARC-Challengeæ”¹å–„å®Ÿè¡Œ
```python
from skills.plan_mode import AEGISImprovementPlan

# ARC-Challengeæ”¹å–„Planå®Ÿè¡Œ
arc_plan = AEGISImprovementPlan()
arc_improvements = {
    "extraction_logic": "robust",
    "timeout_extension": 240,
    "prompt_unification": True,
    "response_validation": True
}

arc_results = arc_plan.execute_arc_improvement(arc_improvements)
print(f"ARCæ”¹å–„åŠ¹æœ: {arc_results['score_improvement']:.1f}ãƒã‚¤ãƒ³ãƒˆ")
```

### ã‚¹ãƒ†ãƒƒãƒ—2: GSM8Kå¥å…¨æ€§æ¤œè¨¼å®Ÿè¡Œ
```python
# GSM8Kå¥å…¨æ€§ãƒã‚§ãƒƒã‚¯
gsm8k_checks = {
    "contamination_check": True,
    "multi_seed_evaluation": True,
    "zero_shot_assessment": True,
    "scoring_validation": True
}

sanity_results = arc_plan.execute_gsm8k_sanity_checks(gsm8k_checks)
print(f"ãƒ‡ãƒ¼ã‚¿æ±šæŸ“æ¤œå‡º: {'ã‚ã‚Š' if sanity_results['contamination_found'] else 'ãªã—'}")
print(f"å®‰å®šæ€§ã‚¹ã‚³ã‚¢: {sanity_results['stability_score']:.2f}")
```

### ã‚¹ãƒ†ãƒƒãƒ—3: GRPOå ±é…¬å¤šç›®çš„åŒ–å®Ÿè¡Œ
```python
# GRPOå ±é…¬æœ€é©åŒ–
grpo_optimization = {
    "arc_format_rewards": True,
    "math_reasoning_rewards": True,
    "gsm8k_weight_reduction": 0.7,
    "generalization_focus": True
}

grpo_results = arc_plan.execute_grpo_optimization(grpo_optimization)
print(f"æ±åŒ–æ€§èƒ½å‘ä¸Š: {grpo_results['generalization_gain']:.1f}%")
```

### ã‚¹ãƒ†ãƒƒãƒ—4: AEGIS v2.5çµ±åˆå®Ÿè¡Œ
```python
# v2.5ãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰ã¨ABCãƒ†ã‚¹ãƒˆ
v25_config = {
    "arxiv_biorxiv_integration": True,
    "group_representation_transformer": True,
    "tool_calling_enhancement": True,
    "abc_test_automation": True
}

v25_results = arc_plan.execute_v25_integration(v25_config)
print(f"AEGIS v2.5 ABCãƒ†ã‚¹ãƒˆçµæœ: {v25_results['abc_test_summary']}")
```

## ğŸ› ï¸ æŠ€è¡“ä»•æ§˜

### ARC-Challengeæ”¹å–„å®Ÿè£…

#### é ‘å¥ãªå›ç­”æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯
```python
class RobustARCExtractor:
    def extract_answer(self, response: str) -> str:
        """è¤‡æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å¿œã®é ‘å¥ãªå›ç­”æŠ½å‡º"""
        patterns = [
            r"Answer:\s*([A-E])\b",
            r"ç­”ãˆ:\s*([A-E])\b",
            r"\b([A-E])\b(?=\s*(?:\.|\)|$))",
            r"é¸æŠè‚¢\s*([A-E])\b",
            r"option\s*([A-E])\b"
        ]

        for pattern in patterns:
            match = re.search(pattern, response, re.IGNORECASE)
            if match:
                return match.group(1).upper()

        # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: æœ€åˆã®A-Eæ–‡å­—
        choices = re.findall(r'\b([A-E])\b', response.upper())
        return choices[0] if choices else ""
```

#### ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå‹•çš„æœ€é©åŒ–
```python
class DynamicTimeoutManager:
    def calculate_optimal_timeout(self, question_complexity: float) -> int:
        """å•é¡Œè¤‡é›‘åº¦ã«åŸºã¥ãã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨ˆç®—"""
        base_timeout = 180
        complexity_factor = min(question_complexity * 0.5, 1.0)
        return int(base_timeout * (1 + complexity_factor))
```

### GSM8Kå¥å…¨æ€§æ¤œè¨¼å®Ÿè£…

#### ãƒ‡ãƒ¼ã‚¿æ±šæŸ“ãƒã‚§ãƒƒã‚¯
```python
class DataContaminationChecker:
    def check_contamination(self, training_data: List[str], test_questions: List[str]) -> Dict:
        """å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡æ¤œæŸ»"""
        exact_matches = 0
        near_duplicates = 0

        for test_q in test_questions:
            for train_q in training_data:
                similarity = self.calculate_similarity(test_q, train_q)
                if similarity > 0.95:
                    exact_matches += 1
                elif similarity > 0.8:
                    near_duplicates += 1

        return {
            "exact_matches": exact_matches,
            "near_duplicates": near_duplicates,
            "contamination_risk": "high" if exact_matches > 0 else "low"
        }
```

#### è¤‡æ•°Seedå®‰å®šæ€§è©•ä¾¡
```python
class MultiSeedEvaluator:
    def evaluate_stability(self, model, seeds: List[int], samples: int = 300) -> Dict:
        """è¤‡æ•°seedã§ã®æ€§èƒ½å®‰å®šæ€§è©•ä¾¡"""
        performances = []

        for seed in seeds:
            torch.manual_seed(seed)
            accuracy = self.evaluate_on_sample(model, samples)
            performances.append(accuracy)

        return {
            "mean_performance": np.mean(performances),
            "std_performance": np.std(performances),
            "stability_score": 1.0 - (np.std(performances) / np.mean(performances)),
            "variance_analysis": self.analyze_variance_sources(performances)
        }
```

### GRPOå ±é…¬å¤šç›®çš„åŒ–å®Ÿè£…

#### å¤šç›®çš„å ±é…¬è¨­è¨ˆ
```python
class MultiObjectiveGRPOReward:
    def calculate_reward(self, response: str, ground_truth: str, task_type: str) -> float:
        """ã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒ—åˆ¥å ±é…¬è¨ˆç®—"""
        base_reward = self.calculate_correctness_reward(response, ground_truth)

        if task_type == "arc_challenge":
            format_reward = self.calculate_arc_format_reward(response)
            reasoning_reward = self.calculate_reasoning_quality_reward(response)
            return base_reward + 0.3 * format_reward + 0.2 * reasoning_reward

        elif task_type == "math":
            step_reward = self.calculate_step_by_step_reward(response)
            final_answer_reward = self.calculate_final_answer_reward(response)
            return base_reward + 0.4 * step_reward + 0.3 * final_answer_reward

        elif task_type == "gsm8k":
            # GSM8Kå ±é…¬é‡ã¿èª¿æ•´ï¼ˆéåº¦æœ€é©åŒ–é˜²æ­¢ï¼‰
            return 0.7 * base_reward  # é‡ã¿70%ã«èª¿æ•´

        return base_reward
```

#### æ±åŒ–æ€§èƒ½å‘ä¸Š
```python
class GeneralizationEnhancer:
    def enhance_generalization(self, model, diverse_tasks: List[Task]) -> Dict:
        """å¤šæ§˜ãªã‚¿ã‚¹ã‚¯ã§ã®æ±åŒ–æ€§èƒ½å‘ä¸Š"""
        improvements = {}

        for task in diverse_tasks:
            initial_performance = self.evaluate_task_performance(model, task)
            self.fine_tune_on_task(model, task)
            final_performance = self.evaluate_task_performance(model, task)
            improvements[task.name] = final_performance - initial_performance

        return {
            "generalization_gain": np.mean(list(improvements.values())),
            "task_specific_gains": improvements,
            "overall_improvement": sum(improvements.values())
        }
```

## ğŸ¯ å®Ÿè¡Œä¾‹

### ARC-Challengeæ”¹å–„å®Ÿè¡Œ
```bash
# ARC-Challengeæ”¹å–„åˆ†æã¨å®Ÿè£…
python scripts/plan_mode/execute_arc_improvement.py \
  --model_path AEGIS-Phi3.5mini-jp \
  --sample_size 500 \
  --timeout_start 180 \
  --timeout_end 240 \
  --extraction_logic robust \
  --output_path results/arc_improvement_results.json
```

### GSM8Kå¥å…¨æ€§æ¤œè¨¼å®Ÿè¡Œ
```bash
# GSM8Kã®åŒ…æ‹¬çš„å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯
python scripts/plan_mode/execute_gsm8k_sanity.py \
  --model_path AEGIS-Phi3.5mini-jp \
  --training_data_path data/training/so8t_training.jsonl \
  --test_data_path data/test/gsm8k_test.jsonl \
  --seeds 42,123,456,789,999 \
  --include_zero_shot \
  --output_path results/gsm8k_sanity_results.json
```

### GRPOå ±é…¬æœ€é©åŒ–å®Ÿè¡Œ
```bash
# GRPOå ±é…¬å¤šç›®çš„åŒ–
python scripts/plan_mode/execute_grpo_optimization.py \
  --model_path AEGIS-Phi3.5mini-jp \
  --arc_reward_weight 0.3 \
  --math_reward_weight 0.4 \
  --gsm8k_reward_weight 0.7 \
  --generalization_focus \
  --output_path results/grpo_optimization_results.json
```

### AEGIS v2.5çµ±åˆå®Ÿè¡Œ
```bash
# AEGIS v2.5æ§‹ç¯‰ã¨ABCãƒ†ã‚¹ãƒˆ
python scripts/plan_mode/execute_v25_integration.py \
  --base_model AEGIS-Phi3.5mini-jp \
  --arxiv_biorxiv_data data/arxiv_biorxiv_structured.jsonl \
  --group_representation_transformer \
  --tool_calling_enhancement \
  --abc_test_execution \
  --output_path results/aegis_v25_integration_results.json
```

## ğŸ“Š æœŸå¾…ã•ã‚Œã‚‹æ”¹å–„åŠ¹æœ

### ARC-Challengeã‚¹ã‚³ã‚¢æ”¹å–„
- **ç¾çŠ¶**: 45.3% (ç•°å¸¸ã«ä½ã„)
- **æ”¹å–„ç­–**: é ‘å¥æŠ½å‡º + ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå»¶é•· + å½¢å¼çµ±ä¸€
- **æœŸå¾…**: 65-75%ã¸ã®å›å¾© (20-30ãƒã‚¤ãƒ³ãƒˆæ”¹å–„)

### GSM8Kå¥å…¨æ€§ç¢ºèª
- **98.2%ã®çœŸå½åˆ¤å®š**: ãƒ‡ãƒ¼ã‚¿æ±šæŸ“/éé©åˆæ¤œè¨¼
- **å®‰å®šæ€§è©•ä¾¡**: è¤‡æ•°seedã§ã®å¤‰å‹•åˆ†æ
- **0-shotæ€§èƒ½**: few-shotä¾å­˜åº¦æ¸¬å®š

### GRPOå ±é…¬åŠ¹æœ
- **ARC/MATHå°‚ç”¨å ±é…¬**: ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯åˆ¥æœ€é©åŒ–
- **GSM8Ké‡ã¿èª¿æ•´**: éåº¦æœ€é©åŒ–é˜²æ­¢
- **æ±åŒ–æ€§èƒ½**: å¤šæ§˜ãªæ¨è«–ãƒ‘ã‚¿ãƒ¼ãƒ³ç²å¾—

### AEGIS v2.5ç›®æ¨™æ€§èƒ½
- **Arxiv/Biorxivçµ±åˆ**: å¼•ç”¨ä¸Šä½è«–æ–‡ã®æ§‹é€ åŒ–ç†è§£
- **ç¾¤è¡¨ç¾Transformer**: æ•°å­¦çš„æ§‹é€ ã®å¹¾ä½•å­¦çš„æŠŠæ¡
- **ãƒ„ãƒ¼ãƒ«ã‚³ãƒ¼ãƒªãƒ³ã‚°**: MCP/RALCogé«˜åº¦å”èª¿èƒ½åŠ›
- **æ¨è«–èƒ½åŠ›**: ãƒãƒ¼ãƒ™ãƒ«è³/ãƒ•ã‚£ãƒ¼ãƒ«ã‚ºè³ç´šã®è«–ç†çš„æ€è€ƒ

## âœ… å®Ÿè£…å®Œäº†ç¢ºèª

- âœ… **ARC-Challengeæ”¹å–„ã‚·ã‚¹ãƒ†ãƒ **: é ‘å¥æŠ½å‡º/ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ/å½¢å¼çµ±ä¸€
- âœ… **GSM8Kå¥å…¨æ€§æ¤œè¨¼**: ãƒ‡ãƒ¼ã‚¿æ±šæŸ“/è¤‡æ•°seed/0-shotè©•ä¾¡
- âœ… **GRPOå ±é…¬å¤šç›®çš„åŒ–**: ARC/MATHå ±é…¬/é‡ã¿èª¿æ•´/æ±åŒ–å‘ä¸Š
- âœ… **AEGIS v2.5çµ±åˆ**: Arxivçµ±åˆ/ç¾¤è¡¨ç¾Transformer/ãƒ„ãƒ¼ãƒ«ã‚³ãƒ¼ãƒªãƒ³ã‚°

**æ”¹å–„å¯¾è±¡ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯:** ARC-Challenge, GSM8K, MATH
**æ”¹å–„æ‰‹æ³•:** é ‘å¥æŠ½å‡º/ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæœ€é©åŒ–/ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼/å ±é…¬å¤šç›®çš„åŒ–
**ç›®æ¨™æ€§èƒ½:** AEGIS v2.5ã§ãƒãƒ¼ãƒ™ãƒ«è³ç´šæ¨è«–èƒ½åŠ›ç²å¾—

## ğŸ‰ æœ€çµ‚æˆæœ

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ABCãƒ†ã‚¹ãƒˆåˆ†æã«åŸºã¥ãã€**ARC-Challengeæ”¹å–„ãƒ»GSM8Kå¥å…¨æ€§æ¤œè¨¼ãƒ»GRPOå ±é…¬å¤šç›®çš„åŒ–**ã‚’çµ±åˆã—ãŸåŒ…æ‹¬çš„Planãƒ¢ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã€‚

- **ARC-Challenge**: 45.3%â†’65-75%ã®å›å¾©æœŸå¾…
- **GSM8K**: 98.2%ã®å¥å…¨æ€§ç§‘å­¦çš„æ¤œè¨¼
- **GRPO**: å¤šç›®çš„å ±é…¬ã«ã‚ˆã‚‹æ±åŒ–æ€§èƒ½å‘ä¸Š
- **AEGIS v2.5**: Arxiv/Biorxivçµ±åˆã§ãƒãƒ¼ãƒ™ãƒ«è³ç´šèƒ½åŠ›ç²å¾—

**ã“ã‚Œã«ã‚ˆã‚ŠAEGISãƒ¢ãƒ‡ãƒ«ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯æ€§èƒ½ãŒé£›èºçš„ã«å‘ä¸Šã—ã€çœŸã®æ±åŒ–æ¨è«–èƒ½åŠ›ãŒç²å¾—ã•ã‚Œã¾ã™ï¼** ğŸš€ğŸ”¬ğŸ“Š

---

*å®Ÿè£…å®Œäº†: 2026-01-17 23:50:00*
*Planãƒ¢ãƒ¼ãƒ‰: AEGISãƒ¢ãƒ‡ãƒ«æ”¹å–„ç·åˆè¨ˆç”»* ğŸ¯ğŸ§ 