---
name: drama-workflow
description: 协调情节点戏剧功能分析流程，管理文本预处理、并行分析、结果整合。适用于长文本的情节点和戏剧功能分析、需要结构化分析报告的场景
category: workflow
version: 2.1.0
last_updated: 2026-01-11
license: MIT
compatibility: Claude Code 1.0+
maintainer: 宫凡
allowed-tools:
  - Read
model: opus
changelog:
  - version: 2.1.0
    date: 2026-01-11
    changes:
      - type: improved
        content: 优化 description 字段，使其更精简并符合命令式语言规范
      - type: changed
        content: 模型更改为 opus
      - type: improved
        content: 优化功能、使用场景、核心步骤、输入要求、输出格式的描述，使其更符合命令式语言规范
      - type: added
        content: 添加约束条件、示例和详细文档部分
  - version: 2.0.0
    date: 2026-01-11
    changes:
      - type: breaking
        content: 按照 Agent Skills 官方规范重构
      - type: improved
        content: 优化 description，使用命令式语言，精简主内容
      - type: added
        content: 添加 license、compatibility 可选字段
      - type: added
        content: 添加 allowed-tools (Read) 和 model 字段
  - version: 1.0.0
    date: 2026-01-10
    changes:
      - type: added
        content: 初始版本
---

# 情节点戏剧功能分析工作流编排器

## 功能

协调整个情节点戏剧功能分析流程，管理文本预处理、并行分析、结果整合及报告生成。

## 使用场景

- 对长篇故事文本进行情节点和戏剧功能分析。
- 需要高质量、专业化的戏剧分析报告。
- 需获取结构化的分析结果。

## 工作流步骤

1. **文本预处理**: 截断和分割长文本，确保文本适合后续分析。
2. **并行分析**: 对文本片段进行情节点分析，提高分析效率。
3. **结果整合**: 合并和优化分析结果，确保结果一致性。
4. **报告生成**: 生成最终的综合分析报告。

## 编排原则

- 确保输入输出正确传递。
- 管理智能体间的上下文隔离。
- 优化并行处理性能。
- 保证分析结果的完整性和准确性。

## 输入要求

- 长文本故事内容。
- 分析需求说明（可选）。

## 输出格式

```
【情节点戏剧功能分析报告】

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
一、分析概览
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
- 文本长度：[字数]
- 分析片段数：[数量]
- 情节点总数：[数量]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
二、情节点分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【情节点1】：[描述]
【戏剧功能】：[分析]

【情节点2】：[描述]
【戏剧功能】：[分析]
...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
三、戏剧结构分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[整体戏剧结构分析]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
四、专业洞察
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[从编剧角度的专业洞察]
```

## 约束条件

- 输入文本长度需满足分段处理要求。
- 确保每个情节点分析的独立性和准确性。
- 最终报告需逻辑清晰，结论明确。

## 示例

请参见 `{baseDir}/references/examples.md` 获取详细工作流示例。该文件包含了长篇小说、剧本等不同类型文本的情节点戏剧功能分析报告。

---

## 版本历史

| 版本 | 日期 | 变更 |
|------|------|------|
| 2.1.0 | 2026-01-11 | 优化 description 字段，添加 allowed-tools 和 model 字段，调整主内容语言风格，添加约束条件，并引导至 references/examples.md |
| 2.0.0 | 2026-01-11 | 按官方规范重构 |
| 1.0.0 | 2026-01-10 | 初始版本 |
