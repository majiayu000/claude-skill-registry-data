---
name: parallel-task
description: >
  복잡한 작업을 depth 분석 후 병렬 서브에이전트로 분해하여 실행.
  대규모 탐색, 다중 파일 분석, 리서치 작업 시 사용.
  "병렬로", "동시에", "여러 개를" 키워드 시 자동 활성화.
---

# Parallel Task Executor

복잡한 작업을 분석하여 최적의 병렬 실행 전략을 결정하고, 서브에이전트로 위임합니다.

## 실행 흐름

```
[요청 분석] → [Depth 판단] → [작업 분해] → [병렬 위임] → [결과 통합]
```

## 1. Depth 분석 기준

| Depth | 조건 | 전략 |
|-------|------|------|
| 0 | 단일 파일/간단한 질문 | 직접 처리 |
| 1 | 2-5개 독립 작업 | 병렬 에이전트 1회 |
| 2 | 각 작업이 하위 작업 포함 | 재귀적 분해 |
| 3+ | 대규모 탐색/분석 | 단계별 병렬화 |

## 2. 작업 분해 원칙

### 분해 가능 조건
- 작업 간 의존성 없음
- 각 작업이 독립적으로 완료 가능
- 결과 통합이 단순함

### 분해 불가 조건
- 순차적 의존성 (A 결과가 B 입력)
- 공유 상태 변경
- 트랜잭션 필요

## 3. 병렬 위임 패턴

```
# 독립 작업 → 동시 실행
Task tool 호출 시:
- 단일 메시지에 여러 Task tool 포함
- 각 서브에이전트는 독립적으로 실행
- model: haiku (빠른 탐색) 또는 sonnet (분석)
```

### 에이전트 선택 기준

| 작업 유형 | subagent_type | model |
|----------|---------------|-------|
| 파일 탐색 | Explore | haiku |
| 코드 분석 | general-purpose | sonnet |
| 계획 수립 | Plan | sonnet |
| 단순 명령 | Bash | haiku |

## 4. 결과 통합

각 서브에이전트 결과를 수집하여:
1. 중복 제거
2. 관련성 순 정렬
3. 사용자에게 요약 제공

## 예제

### 입력
```
"프로젝트의 모든 API 엔드포인트를 찾아서 각각의 인증 방식을 분석해줘"
```

### Depth 분석
- Depth 2: (1) 엔드포인트 탐색 → (2) 각 엔드포인트별 인증 분석

### 실행 계획
```
1단계 (Depth 1): Explore 에이전트로 엔드포인트 목록 수집
2단계 (Depth 2): 각 엔드포인트에 대해 병렬로 분석 에이전트 실행
```

## 제약 사항

- 최대 동시 에이전트: 5개 권장
- Depth 3 이상은 사용자 확인 후 진행
- 부작용 있는 작업은 병렬화 금지

## 상세 가이드

- [분해 전략](references/decomposition.md) - 작업 분해 상세 패턴
- [통합 패턴](references/aggregation.md) - 결과 통합 방법
