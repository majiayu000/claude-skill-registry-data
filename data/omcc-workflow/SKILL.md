---
name: omcc-workflow
description: |
  OMCC (Coder-Reviewer-Advisor) collaboration for code and document tasks.
  Use when: writing/modifying code, editing documents, implementing features, fixing bugs, refactoring, or code review.
  åè°ƒ Coder æ‰§è¡Œä»£ç /æ–‡æ¡£æ”¹åŠ¨ï¼ŒReviewer å®¡æ ¸ä»£ç è´¨é‡ã€‚
---

# OMCC åä½œæµç¨‹

## è§’è‰²åˆ†å·¥

- **Claude**ï¼šæ¶æ„å¸ˆ + éªŒæ”¶è€… + æœ€ç»ˆå†³ç­–è€… + åè°ƒè€…
- **Coder**ï¼šæ‰§è¡Œè€…ï¼ˆä»£ç /æ–‡æ¡£æ”¹åŠ¨ï¼‰
- **Reviewer**ï¼šå®¡æ ¸è€… + é«˜çº§ä»£ç é¡¾é—®
- **Advisor**ï¼šé«˜é˜¶é¡¾é—®ï¼ˆæ¶æ„è®¾è®¡ã€ç¬¬äºŒæ„è§ï¼‰â†’ è¯¦è§ `/advisor-collaboration`
- **Frontend**ï¼š**å‰ç«¯/UI ä¸“å®¶**ï¼ˆç•Œé¢è®¾è®¡ã€æ ·å¼ã€åŠ¨æ•ˆï¼‰
- **Librarian**ï¼šç½‘ç»œç ”ç©¶ä¸“å®¶ï¼ˆæ–‡æ¡£æŸ¥è¯¢ + ç½‘ç»œæœç´¢ + ä»£ç æœç´¢ï¼‰
- **Looker**ï¼šå¤šæ¨¡æ€åˆ†æä¸“å®¶ï¼ˆPDF/å›¾ç‰‡/å›¾è¡¨åˆ†æï¼‰

## ä»»åŠ¡æ‹†åˆ†åŸåˆ™ï¼ˆåˆ†å‘ç»™ Coderï¼‰

> âš ï¸ **ä¸€æ¬¡è°ƒç”¨ï¼Œä¸€ä¸ªç›®æ ‡**ã€‚ç¦æ­¢å‘ Coder å †ç Œå¤šä¸ªä¸ç›¸å…³éœ€æ±‚ã€‚

- **ç²¾å‡† Prompt**ï¼šç›®æ ‡æ˜ç¡®ã€ä¸Šä¸‹æ–‡å……åˆ†ã€éªŒæ”¶æ ‡å‡†æ¸…æ™°
- **æŒ‰æ¨¡å—æ‹†åˆ†**ï¼šç›¸å…³æ”¹åŠ¨å¯åˆå¹¶ï¼Œç‹¬ç«‹æ¨¡å—åˆ†å¼€
- **é˜¶æ®µæ€§ Review**ï¼šæ¯æ¨¡å— Claude éªŒæ”¶ï¼Œé‡Œç¨‹ç¢‘å Reviewer å®¡æ ¸

## ğŸ¯ å¦‚ä½•ç»™ Coder ç¼–å†™æœ‰æ•ˆçš„ä»»åŠ¡æç¤ºè¯

> **æ ¸å¿ƒåŸåˆ™**ï¼šCoder æ˜¯ä¸€ä½èƒ½åŠ›æœ‰é™ä½†å‹¤å¥‹çš„åŒäº‹â€”â€”ä»–ä»æœªè§è¿‡ä½ çš„ä»£ç åº“ï¼Œä½†ä¼šä¸¥æ ¼æŒ‰ç…§ä½ çš„æŒ‡ä»¤æ‰§è¡Œã€‚**ä»»åŠ¡å¤±è´¥çš„ä¸»è¦åŸå› æ˜¯è§„æ ¼ä¸è¶³ï¼ˆunder-specificationï¼‰ï¼Œè€Œéæ¨¡å‹èƒ½åŠ›ä¸è¶³ã€‚**

### 1. "ååœ¨ä½ æ—è¾¹çš„åŒäº‹"æµ‹è¯•

æŠŠ Coder æƒ³è±¡æˆä¸€ä¸ªåˆšå…¥èŒã€ä»æœªè§è¿‡é¡¹ç›®ä»£ç çš„åˆçº§å¼€å‘è€…ï¼š
- âŒ ä»–ä¸çŸ¥é“é¡¹ç›®çš„æ–‡ä»¶ç»“æ„å’Œçº¦å®š
- âŒ ä»–ä¸äº†è§£å·²æœ‰çš„å·¥å…·å‡½æ•°å’Œç»„ä»¶
- âŒ ä»–ä¸æ¸…æ¥šæ½œåœ¨çš„ä¸šåŠ¡çº¦æŸ
- âœ… ä½†ä»–ä¼šä¸¥æ ¼æŒ‰ç…§ä½ çš„æŒ‡ä»¤æ‰§è¡Œ

**å› æ­¤ä½ éœ€è¦**ï¼šæä¾›å®Œæ•´çš„ä¸Šä¸‹æ–‡ã€æ˜ç¡®çš„æ­¥éª¤ã€æ¸…æ™°çš„äº¤ä»˜æ ‡å‡†ã€‚

### 2. ç»™æ–¹å‘ï¼Œä¸æ˜¯é—®é—®é¢˜

| âŒ æ¨¡ç³Šçš„é—®é¢˜ | âœ… æ˜ç¡®çš„æ–¹å‘ |
|--------------|--------------|
| "ä¸ºä»€ä¹ˆè¿”å›æŒ‰é’®ä¸å·¥ä½œï¼Ÿ" | "åœ¨ settings é¡µé¢ï¼Œè¿”å›æŒ‰é’®ç‚¹å‡»åæ²¡æœ‰å¯¼èˆªã€‚è¯·å®šä½ bugï¼Œä¿®å¤å®ƒï¼Œå¹¶éªŒè¯ä¿®å¤æœ‰æ•ˆã€‚" |
| "åŠ ä¸ªæš—é»‘æ¨¡å¼" | "åœ¨ settings é¡µé¢æ·»åŠ æš—é»‘æ¨¡å¼åˆ‡æ¢ã€‚ç”¨æˆ·åå¥½å­˜å‚¨åœ¨ localStorage çš„ `user-prefs` ä¸­ã€‚å‚è€ƒ `src/components/Toggle.tsx` çš„æ ·å¼ã€‚" |
| "å†™ä¸ªç”¨æˆ·é€šçŸ¥çš„ API" | "åˆ›å»ºç”¨æˆ·é€šçŸ¥ API ç«¯ç‚¹ã€‚å‚è€ƒ `src/api/messages.ts` çš„æ¨¡å¼ã€‚å®Œæˆåè¿è¡Œ `npm test` ç¡®ä¿æµ‹è¯•é€šè¿‡ã€‚" |

### 3. è¯¦ç»†ä»»åŠ¡æç¤ºè¯æ¨¡æ¿

```markdown
**ä»»åŠ¡ç›®æ ‡**ï¼š[ä¸€å¥è¯è¯´æ˜è¦å®Œæˆä»€ä¹ˆ]

**èƒŒæ™¯ä¸Šä¸‹æ–‡**ï¼š
- é¡¹ç›®ä½¿ç”¨ [æ¡†æ¶/æŠ€æœ¯æ ˆ]
- ç›¸å…³æ–‡ä»¶åœ¨ [ç›®å½•è·¯å¾„]
- å‚è€ƒå·²æœ‰å®ç° [æ–‡ä»¶è·¯å¾„]

**å…·ä½“æ­¥éª¤**ï¼š
1. [ç¬¬ä¸€æ­¥åšä»€ä¹ˆ]
2. [ç¬¬äºŒæ­¥åšä»€ä¹ˆ]
3. [ç»§ç»­åˆ—å‡ºæ‰€æœ‰æ­¥éª¤]

**çº¦æŸæ¡ä»¶**ï¼š
- [å¿…é¡»éµå®ˆçš„è§„åˆ™ï¼Œå¦‚ç¼–ç è§„èŒƒ]
- [éœ€è¦ä¿æŒå…¼å®¹çš„æ¥å£]
- [ä¸è¦ä¿®æ”¹çš„æ–‡ä»¶]

**æ½œåœ¨é™·é˜±**ï¼ˆé‡è¦ï¼ï¼‰ï¼š
- [ä½ çŸ¥é“çš„å¯èƒ½å‡ºé—®é¢˜çš„åœ°æ–¹]
- [å®¹æ˜“è¢«å¿½ç•¥çš„è¾¹ç•Œæƒ…å†µ]
- [é¡¹ç›®ç‰¹æœ‰çš„çº¦æŸ]

**äº¤ä»˜æ ‡å‡†**ï¼ˆDefinition of Doneï¼‰ï¼š
- [ ] [å…·ä½“çš„éªŒæ”¶æ¡ä»¶ 1]
- [ ] [å…·ä½“çš„éªŒæ”¶æ¡ä»¶ 2]
- [ ] è¿è¡Œ [æµ‹è¯•å‘½ä»¤] ç¡®ä¿é€šè¿‡

**è‡ªæ£€æ­¥éª¤**ï¼ˆFeedback Loopï¼‰ï¼š
- å®Œæˆåè¿è¡Œ [å‘½ä»¤] éªŒè¯
- æ£€æŸ¥ [æ–‡ä»¶] ç¡®è®¤æ”¹åŠ¨æ­£ç¡®
```

### 4. å®é™…æ¡ˆä¾‹å¯¹æ¯”

**âŒ ç³Ÿç³•çš„ Prompt**ï¼š
```
ä¿®å¤ç™»å½• bug
```

**âœ… ä¼˜ç§€çš„ Prompt**ï¼š
```markdown
**ä»»åŠ¡ç›®æ ‡**ï¼šä¿®å¤ç™»å½•åŠŸèƒ½çš„ token åˆ·æ–°é—®é¢˜

**èƒŒæ™¯ä¸Šä¸‹æ–‡**ï¼š
- é¡¹ç›®ä½¿ç”¨ JWT è®¤è¯ï¼Œtoken å­˜å‚¨åœ¨ localStorage
- è®¤è¯ç›¸å…³ä»£ç åœ¨ `src/auth/` ç›®å½•
- å‚è€ƒ `src/auth/refresh.ts` çš„åˆ·æ–°é€»è¾‘

**é—®é¢˜æè¿°**ï¼š
ç”¨æˆ·æŠ¥å‘Šç™»å½•åçº¦ 1 å°æ—¶ä¼šè¢«è¸¢å‡ºç™»å½•ã€‚ç»åˆ†æï¼Œé—®é¢˜æ˜¯ token è¿‡æœŸåæ²¡æœ‰è‡ªåŠ¨åˆ·æ–°ã€‚

**å…·ä½“æ­¥éª¤**ï¼š
1. åœ¨ `src/auth/interceptor.ts` æ·»åŠ  401 å“åº”æ‹¦æˆª
2. æ£€æµ‹åˆ° 401 æ—¶è°ƒç”¨ `refreshToken()` å‡½æ•°
3. åˆ·æ–°æˆåŠŸåé‡è¯•åŸè¯·æ±‚
4. åˆ·æ–°å¤±è´¥æ—¶é‡å®šå‘åˆ°ç™»å½•é¡µ

**çº¦æŸæ¡ä»¶**ï¼š
- ä¸è¦ä¿®æ”¹ `src/auth/login.ts` çš„æ¥å£ç­¾å
- ä¿æŒä¸ç°æœ‰ axios å®ä¾‹çš„å…¼å®¹æ€§

**æ½œåœ¨é™·é˜±**ï¼š
- åˆ·æ–° token è¯·æ±‚æœ¬èº«ä¹Ÿå¯èƒ½è¿”å› 401ï¼Œéœ€è¦é¿å…æ— é™å¾ªç¯
- å¹¶å‘è¯·æ±‚æ—¶å¯èƒ½åŒæ—¶è§¦å‘å¤šæ¬¡åˆ·æ–°ï¼Œéœ€è¦åŠ é”

**äº¤ä»˜æ ‡å‡†**ï¼š
- [ ] 401 å“åº”èƒ½æ­£ç¡®è§¦å‘ token åˆ·æ–°
- [ ] åˆ·æ–°æˆåŠŸååŸè¯·æ±‚èƒ½æ­£å¸¸é‡è¯•
- [ ] åˆ·æ–°å¤±è´¥æ—¶ç”¨æˆ·è¢«æ­£ç¡®å¼•å¯¼åˆ°ç™»å½•é¡µ
- [ ] è¿è¡Œ `npm test -- --grep "auth"` æµ‹è¯•é€šè¿‡

**è‡ªæ£€æ­¥éª¤**ï¼š
- è¿è¡Œ `npm run lint` ç¡®ä¿ä»£ç è§„èŒƒ
- æ£€æŸ¥ Network é¢æ¿ç¡®è®¤åˆ·æ–°é€»è¾‘æ­£å¸¸è§¦å‘
```

### 5. å¸¸è§é”™è¯¯

| é”™è¯¯ | ä¸ºä»€ä¹ˆæ˜¯é—®é¢˜ | å¦‚ä½•æ”¹è¿› |
|------|-------------|----------|
| ç¼ºå°‘æ–‡ä»¶è·¯å¾„ | Coder ä¸çŸ¥é“æ”¹å“ªä¸ªæ–‡ä»¶ | æ˜ç¡®æŒ‡å®šç›®æ ‡æ–‡ä»¶ |
| æ²¡æœ‰å‚è€ƒç¤ºä¾‹ | Coder ä¸çŸ¥é“é¡¹ç›®é£æ ¼ | æä¾›ç±»ä¼¼åŠŸèƒ½çš„å‚è€ƒæ–‡ä»¶ |
| ç¼ºå°‘çº¦æŸæ¡ä»¶ | å¯èƒ½ç ´åå·²æœ‰åŠŸèƒ½ | è¯´æ˜ä¸è¦ä¿®æ”¹çš„éƒ¨åˆ† |
| æ²¡æœ‰äº¤ä»˜æ ‡å‡† | æ— æ³•åˆ¤æ–­æ˜¯å¦å®Œæˆ | ç»™å‡ºå¯éªŒè¯çš„æ£€æŸ¥ç‚¹ |
| å¿½ç•¥æ½œåœ¨é™·é˜± | è¸©åˆ°ä½ å·²çŸ¥çš„å‘ | æå‰å‘ŠçŸ¥é£é™©ç‚¹ |

## æ ¸å¿ƒæµç¨‹

### 0. ç½‘ç»œç ”ç©¶ï¼šLibrarian æŸ¥è¯¢å¤–éƒ¨èµ„æ–™ï¼ˆå¯é€‰ï¼‰

ä»»åŠ¡å¼€å§‹å‰ï¼Œå¦‚æœéœ€è¦æŸ¥è¯¢å¤–éƒ¨æ–‡æ¡£æˆ–æœ€æ–°ä¿¡æ¯ï¼š
- **è°ƒç”¨ Librarian** æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£ã€ç½‘ç»œæœç´¢ã€GitHub ä»£ç 
- è·å–æœ€ä½³å®è·µã€è§£å†³æ–¹æ¡ˆã€å¤–éƒ¨ä»£ç ç¤ºä¾‹
- å°†ç ”ç©¶ç»“æœä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’ç»™ Coder

```
Librarian(PROMPT="React useEffect çš„æœ€ä½³å®è·µ", cd=".")
â†’ è¿”å›å®˜æ–¹æ–‡æ¡£é“¾æ¥å’Œä»£ç ç¤ºä¾‹
â†’ å°†ç»“æœä½œä¸ºä¸Šä¸‹æ–‡ä¼ ç»™ Coder
```

**æ³¨æ„**ï¼šæœ¬åœ°ä»£ç æœç´¢è¯·ä½¿ç”¨ Claude çš„ **Explore ä»£ç†**

### 1. æ‰§è¡Œï¼šCoder å¤„ç†æ‰€æœ‰æ”¹åŠ¨

æ‰€æœ‰ä»£ç ã€æ–‡æ¡£ç­‰å†…å®¹æ”¹åŠ¨ä»»åŠ¡ï¼Œ**ç›´æ¥å§”æ‰˜ Coder æ‰§è¡Œ**ã€‚

è°ƒç”¨å‰ï¼ˆå¤æ‚ä»»åŠ¡æ¨èï¼‰ï¼š
- **è°ƒç”¨ Librarian** æŸ¥è¯¢å¤–éƒ¨æ–‡æ¡£å’Œæœ€ä½³å®è·µ
- åœ¨ PROMPT ä¸­åˆ—å‡ºä¿®æ”¹æ¸…å•
- **å¤æ‚é—®é¢˜å¯å…ˆä¸ Reviewer æ²Ÿé€š**ï¼šæ¶æ„è®¾è®¡æˆ–å¤æ‚æ–¹æ¡ˆå¯å…ˆå’¨è¯¢åå†å§”æ‰˜ Coder æ‰§è¡Œ

### 2. éªŒæ”¶ï¼šClaude å¿«é€Ÿæ£€æŸ¥

Coder æ‰§è¡Œå®Œæ¯•åï¼ŒClaude å¿«é€Ÿè¯»å–éªŒæ”¶ï¼š
- **æ— è¯¯** â†’ ç»§ç»­ä¸‹ä¸€ä»»åŠ¡
- **æœ‰è¯¯** â†’ Claude è‡ªè¡Œä¿®å¤

### 3. å®¡æ ¸ï¼šReviewer é˜¶æ®µæ€§ Review

é˜¶æ®µæ€§å¼€å‘å®Œæˆåï¼Œè°ƒç”¨ Reviewer reviewï¼š
- æ£€æŸ¥ä»£ç è´¨é‡ã€æ½œåœ¨ Bug
- ç»“è®ºï¼šâœ… é€šè¿‡ / âš ï¸ ä¼˜åŒ– / âŒ ä¿®æ”¹

## å·¥å…·å‚è€ƒ

| å·¥å…· | ç”¨é€” | sandbox | æ¨¡å‹ | é‡è¯• |
|------|------|---------|------|------|
| Coder | æ‰§è¡Œæ”¹åŠ¨ | workspace-write | å¯é…ç½® | é»˜è®¤ä¸é‡è¯• |
| Reviewer | ä»£ç å®¡æ ¸ | read-only | OpenAI Reviewer | é»˜è®¤ 1 æ¬¡ |
| Advisor | é¡¾é—®/æ‰§è¡Œ | workspace-write (yolo) | advisor-3-pro | é»˜è®¤ 1 æ¬¡ |
| **Frontend** | **å‰ç«¯/UI** | workspace-write | advisor-3-pro | é»˜è®¤ 1 æ¬¡ |
| Librarian | ç½‘ç»œç ”ç©¶ | read-only | advisor-3-flash | é»˜è®¤ 1 æ¬¡ |
| Looker | å¤šæ¨¡æ€åˆ†æ | read-only | advisor-3-flash | é»˜è®¤ 1 æ¬¡ |

### Librarian ç½‘ç»œç ”ç©¶èƒ½åŠ›

Librarian é€šè¿‡ OpenCode CLI é…ç½®çš„ MCP æä¾›ç½‘ç»œç ”ç©¶èƒ½åŠ›ï¼š

| MCP | åŠŸèƒ½ | ç¤ºä¾‹åœºæ™¯ |
|-----|------|----------|
| **context7** | å®˜æ–¹æ–‡æ¡£æŸ¥è¯¢ | "React useEffect æœ€ä½³å®è·µ" |
| **exa** | ç½‘ç»œæœç´¢ | "TypeScript 5.5 æ–°ç‰¹æ€§" |
| **Playwright** | æµè§ˆå™¨è‡ªåŠ¨åŒ– | "æŠ“å–éœ€è¦ JS æ¸²æŸ“çš„é¡µé¢" |
| **grep** | ä»£ç æœç´¢ (grep.app) | "TanStack Query çš„ useQuery å®ç°" |
| **firecrawl** | ç½‘é¡µæŠ“å– | "æ·±å…¥é˜…è¯»æŸç¯‡æŠ€æœ¯æ–‡ç« " |

| è¯·æ±‚ç±»å‹ | è§¦å‘è¯ | ç¤ºä¾‹ |
|----------|--------|------|
| **TYPE A** | "å¦‚ä½•ä½¿ç”¨...", "æœ€ä½³å®è·µ..." | æ¦‚å¿µ/ç”¨æ³•é—®é¢˜ |
| **TYPE B** | "X æ˜¯å¦‚ä½•å®ç°çš„" | å¤–éƒ¨æºç æŸ¥æ‰¾ |
| **TYPE C** | "ä¸ºä»€ä¹ˆæŠ¥é”™...", "æ€ä¹ˆè§£å†³..." | é—®é¢˜è¯Šæ–­ |
| **TYPE D** | å¤æ‚/æ¨¡ç³Šè¯·æ±‚ | ç»¼åˆç ”ç©¶ |

**æ³¨æ„**ï¼šæœ¬åœ°ä»£ç æœç´¢è¯·ä½¿ç”¨ Claude çš„ **Explore ä»£ç†**

### Looker å¤šæ¨¡æ€åˆ†æ

| æ–‡ä»¶ç±»å‹ | åˆ†æèƒ½åŠ› |
|----------|----------|
| **PDF** | æå–æ–‡æœ¬ã€è¡¨æ ¼ã€ç»“æ„ |
| **å›¾ç‰‡** | æè¿°å†…å®¹ã€è¯†åˆ« UI å…ƒç´  |
| **å›¾è¡¨** | è§£é‡Šæ•°æ®è¶‹åŠ¿å’Œå…³ç³» |
| **æ¶æ„å›¾** | è§£é‡Šç»„ä»¶å…³ç³»å’Œæ•°æ®æµ |
| **æˆªå›¾** | è¯†åˆ«é”™è¯¯ä¿¡æ¯ã€UI çŠ¶æ€ |

> ğŸ’¡ **Advisor è¯¦ç»†æŒ‡å—**ï¼šå¦‚éœ€äº†è§£ Advisor çš„å…·ä½“è°ƒç”¨æ–¹å¼å’Œè§¦å‘åœºæ™¯ï¼Œè¯·æ‰§è¡Œ `/advisor-collaboration` æŠ€èƒ½ã€‚

### å‰ç«¯/UI ä»»åŠ¡è·¯ç”±

**å‰ç«¯/UI ä»»åŠ¡åº”ä½¿ç”¨ Frontend ä»£ç†ï¼**

| ä»»åŠ¡ç±»å‹ | é¦–é€‰ä»£ç† |
|----------|----------|
| ç•Œé¢å¸ƒå±€/ç»„ä»¶è®¾è®¡ | **Frontend** |
| æ ·å¼/åŠ¨æ•ˆå®ç° | **Frontend** |
| UI å®¡æŸ¥/æ”¹è¿› | **Frontend** |
| ä»£ç å®ç°ï¼ˆè®¾è®¡å®Œæˆåï¼‰ | Coder |
| ä»£ç å®¡æŸ¥ | Reviewer |
| æ¶æ„è®¾è®¡/ç¬¬äºŒæ„è§ | Advisor |

> ğŸ’¡ **Frontend è¯¦ç»†æŒ‡å—**ï¼šæ‰§è¡Œ `/frontend` æŠ€èƒ½è·å–å®Œæ•´çš„å‰ç«¯å¼€å‘æŒ‡å—ã€‚

**ä¼šè¯å¤ç”¨**ï¼šä¿å­˜ `SESSION_ID` ä¿æŒä¸Šä¸‹æ–‡ã€‚

## ç‹¬ç«‹å†³ç­–

Coder/Reviewer/Advisor çš„æ„è§ä»…ä¾›å‚è€ƒã€‚ä½ ï¼ˆClaudeï¼‰æ˜¯æœ€ç»ˆå†³ç­–è€…ï¼Œéœ€æ‰¹åˆ¤æ€§æ€è€ƒï¼Œåšå‡ºæœ€ä¼˜å†³ç­–ã€‚

è¯¦ç»†å‚æ•°ï¼š[coder-guide.md](coder-guide.md) | [reviewer-guide.md](reviewer-guide.md)
