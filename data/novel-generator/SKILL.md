---
name: novel-generator
description: æ™ºèƒ½å°è¯´ç”Ÿæˆå™¨v2.0ï¼Œæ”¯æŒé•¿ç¯‡å°è¯´çš„æ–­ç‚¹ç»­ä¼ ã€æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†ã€ä¸‰å±‚å‹ç¼©æœºåˆ¶ã€ç« èŠ‚è·³è½¬ã€æ™ºèƒ½å¯¼å…¥è®¾å®šã€AIè¾…åŠ©ç¼–è¾‘å’Œè®°å¿†ç®¡ç†ã€‚å½“ç”¨æˆ·éœ€è¦åˆ›ä½œé•¿ç¯‡å°è¯´ã€ç®¡ç†å¤æ‚æ•…äº‹ç»“æ„ã€ä»å¤–éƒ¨èµ„æºå¯¼å…¥è®¾å®šã€æˆ–éœ€è¦AIè¾…åŠ©è¿›è¡ŒæŒç»­æ€§çš„åˆ›æ„å†™ä½œæ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚
---

# å°è¯´ç”Ÿæˆå™¨æŠ€èƒ½ v2.0

## æŠ€èƒ½æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é•¿ç¯‡å°è¯´AIåˆ›ä½œè¾…åŠ©æŠ€èƒ½ï¼Œå…·å¤‡å®Œæ•´çš„æ–­ç‚¹ç»­ä¼ ã€æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†ã€åˆ†å±‚å‹ç¼©å­˜å‚¨ã€æ™ºèƒ½å¯¼å…¥å’ŒAIè¾…åŠ©ç¼–è¾‘åŠŸèƒ½ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### 1. åŒæ¨¡å¼æ“ä½œç³»ç»Ÿ
- **è®¾å®šæ¨¡å¼**: å¼•å¯¼å¼åˆ›å»ºä¸–ç•Œè§‚ã€äººç‰©ã€ç¯å¢ƒã€æƒ…èŠ‚ã€é£æ ¼ã€è®°å¿†è®¾å®š
- **å†™ä½œæ¨¡å¼**: åŸºäºè®¾å®šè¿›è¡ŒæŒç»­åˆ›ä½œï¼Œæ”¯æŒç« èŠ‚è·³è½¬å’Œæ–­ç‚¹ç»­ä¼ 
- **å¯¼å…¥æ¨¡å¼**: ä»å¤–éƒ¨ç›®å½•æ™ºèƒ½å¯¼å…¥è®¾å®šå’Œå†…å®¹

### 2. æ™ºèƒ½ä¸Šä¸‹æ–‡ç®¡ç†
- 128k tokenä¸Šä¸‹æ–‡çª—å£ï¼Œå¯é…ç½®
- ä¸‰å±‚å‹ç¼©ç­–ç•¥ï¼šè¿‘æœŸ(2k)ã€ä¸­æœŸ(500token)ã€é•¿æœŸ(100token)
- è®°å¿†å‹ç¼©ç‹¬ç«‹å¤„ç†ï¼Œä¸å ç”¨ä¸»ä¸Šä¸‹æ–‡

### 3. é¡¹ç›®ç»“æ„ç®¡ç†
- æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹æ–‡ä»¶å¤¹ç»“æ„
- ç« èŠ‚ç‹¬ç«‹å­˜å‚¨ï¼Œæ¯ç« åŒ…å«ä¸‰å±‚å‹ç¼©æ•°æ®
- è®¾å®šåŒºã€å†™ä½œåŒºã€æˆå“åŒºä¸‰åŒºåˆ†ç¦»

### 4. æ™ºèƒ½å¯¼å…¥åŠŸèƒ½ ğŸ”¥ NEW
- **æ™ºèƒ½æ‰«æ**: é€’å½’æ‰«ææŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡æœ¬æ–‡ä»¶
- **å†…å®¹è¯†åˆ«**: AIè¾…åŠ©è¯†åˆ«å’Œåˆ†ç±»è®¾å®šå†…å®¹ï¼ˆäººç‰©ã€ä¸–ç•Œè§‚ã€ç¯å¢ƒç­‰ï¼‰
- **æ™ºèƒ½åˆå¹¶**: æ”¯æŒè¦†ç›–ã€è¿½åŠ ã€å±€éƒ¨ä¿®æ”¹ä¸‰ç§æ›´æ–°æ¨¡å¼
- **æ‰¹é‡å¯¼å…¥**: æ”¯æŒæŒ‡å®šè®¾å®šç±»å‹çš„å®šå‘å¯¼å…¥

### 5. å¢å¼ºç¼–è¾‘åŠŸèƒ½ ğŸ”¥ NEW
- **æ™ºèƒ½ç« èŠ‚ç¼–è¾‘**: æ”¯æŒæœ¬åœ°å’ŒAIè¾…åŠ©çš„å†…å®¹ç¼–è¾‘
- **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**: ç»´æŠ¤ç« èŠ‚é—´çš„ä¸€è‡´æ€§å’Œè¿è´¯æ€§
- **å¤šç§ç¼–è¾‘æ¨¡å¼**: æ›¿æ¢ã€è¿½åŠ ã€å‰ç½®ã€æ’å…¥
- **AIé›†æˆ**: é¢„ç•™æ ‡å‡†AIä»»åŠ¡æ¥å£

### 6. è®°å¿†ç®¡ç†ç³»ç»Ÿ ğŸ”¥ NEW
- **è®°å¿†ç‰‡æ®µç®¡ç†**: é€æ¡æ’å…¥å’Œç®¡ç†è§’è‰²è®°å¿†
- **å¤šç»´åº¦æ˜¾ç¤º**: æ”¯æŒæŒ‰ç±»å‹ã€æ—¶é—´çº¿ã€å…³è”ç½‘ç»œç­‰å±•ç¤º
- **æƒ…æ„Ÿæƒé‡**: æ”¯æŒè®°å¿†çš„é‡è¦æ€§å’Œæƒ…æ„Ÿå¼ºåº¦æ ‡è®°
- **è®°å¿†å‹ç¼©**: æ™ºèƒ½å‹ç¼©å’Œé•¿æœŸè®°å¿†ç®¡ç†

## ä½¿ç”¨æŒ‡å—

### é¦–æ¬¡ä½¿ç”¨
1. å¯åŠ¨æŠ€èƒ½è¿›å…¥è®¾å®šæ¨¡å¼
2. å®Œæˆä¸–ç•Œè§‚ã€äººç‰©ã€ç¯å¢ƒã€æƒ…èŠ‚ã€é£æ ¼è®¾å®š
3. å¯é€‰æ·»åŠ è®°å¿†è®¾å®š
4. åˆ‡æ¢åˆ°å†™ä½œæ¨¡å¼å¼€å§‹åˆ›ä½œ

### æ–­ç‚¹ç»­ä¼ 
- æŠ€èƒ½è‡ªåŠ¨ä¿å­˜ä¼šè¯çŠ¶æ€
- é‡æ–°å¯åŠ¨æ—¶æ¢å¤ä¸Šæ¬¡çš„å·¥ä½œçŠ¶æ€
- æ”¯æŒç« èŠ‚è·³è½¬å’Œä¸Šä¸‹æ–‡é‡å»º

### å‹ç¼©ç®¡ç†
- æ¯10ç« è‡ªåŠ¨è§¦å‘å‹ç¼©
- å¤±è´¥æ—¶æŠ¥å‘Šç”¨æˆ·ï¼Œæ”¯æŒæ‰‹åŠ¨é‡è¯•
- ä¸‰å±‚å‹ç¼©ç»“æœç‹¬ç«‹å­˜å‚¨

## æŠ€èƒ½èµ„æºä½¿ç”¨

### Scripts ä½¿ç”¨æ–¹æ³•

### æ ¸å¿ƒç®¡ç†è„šæœ¬

#### session_manager.py
ä¼šè¯ç®¡ç†å’Œæ–­ç‚¹ç»­ä¼ çš„æ ¸å¿ƒè„šæœ¬ï¼š
```bash
python scripts/session_manager.py --action save|load|resume --session-id <session_id>
```

#### mode_handler.py
æ¨¡å¼åˆ‡æ¢è„šæœ¬ï¼š
```bash
python scripts/mode_handler.py --mode setting|writing|import --project-path <path>
```

#### context_manager.py
ä¸Šä¸‹æ–‡ç®¡ç†è„šæœ¬ï¼š
```bash
python scripts/context_manager.py --action build|clean --chapter <N> --token-limit <128k>
```

#### compression_engine.py
å‹ç¼©å¤„ç†è„šæœ¬ï¼š
```bash
python scripts/compression_engine.py --action compress|recompress --chapters <range>
```

### ğŸ”¥ æ–°å¢åŠŸèƒ½è„šæœ¬

#### unified_api.py ğŸ”¥ NEW
ç»Ÿä¸€APIæ¥å£ï¼Œæ•´åˆæ‰€æœ‰åŠŸèƒ½ï¼š
```bash
# ç³»ç»ŸçŠ¶æ€æŸ¥çœ‹
python scripts/unified_api.py --request-json '{"action": "system.status"}'

# å¯¼å…¥è®¾å®šï¼ˆéœ€è¦AIå¤„ç†ï¼‰
python scripts/unified_api.py --request-json '{
  "action": "import.from_directory",
  "target_directory": "./source_materials"
}'

# æ˜¾ç¤ºè®¾å®š
python scripts/unified_api.py --request-json '{
  "action": "display.setting",
  "setting_type": "worldview",
  "format_type": "readable"
}'

# æ™ºèƒ½ç« èŠ‚ç¼–è¾‘
python scripts/unified_api.py --request-json '{
  "action": "chapter.intelligent_edit",
  "chapter_number": 1,
  "edit_request": {
    "content": "æ–°å†…å®¹...",
    "edit_mode": "append",
    "requires_ai": false
  }
}'
```

#### import_manager.py ğŸ”¥ ENHANCED
å¢å¼ºçš„å¯¼å…¥ç®¡ç†å™¨ï¼Œæ”¯æŒæ™ºèƒ½æ‰«æå’ŒAIåˆ†æï¼š
```bash
# æ‰«æç›®å½•å†…å®¹
python scripts/import_manager.py --action scan-directory --target-directory ./source_materials

# ä»ç›®å½•å¯¼å…¥ï¼ˆè¿”å›AIä»»åŠ¡ï¼‰
python scripts/import_manager.py --action import-from-directory --target-directory ./source_materials

# å¤„ç†AIåˆ†æç»“æœ
python scripts/import_manager.py --action process-ai-result --project-path . [éœ€è¦AIç»“æœè¾“å…¥]
```

#### chapter_manager.py ğŸ”¥ ENHANCED
å¢å¼ºçš„ç« èŠ‚ç®¡ç†å™¨ï¼Œæ”¯æŒæ™ºèƒ½ç¼–è¾‘ï¼š
```bash
# åˆ›å»ºç« èŠ‚
python scripts/chapter_manager.py --action create --chapter 1 --title "ç¬¬ä¸€ç« "

# æ™ºèƒ½ç¼–è¾‘ï¼ˆæœ¬åœ°ï¼‰
python scripts/chapter_manager.py --action intelligent-edit --chapter 1 --content "æ–°å†…å®¹" --edit-mode append

# æ™ºèƒ½ç¼–è¾‘ï¼ˆAIï¼‰
python scripts/chapter_manager.py --action intelligent-edit --chapter 1 --requires-ai --edit-instructions "è¯·æ”¹è¿›è¿™æ®µæ–‡å­—"

# ä¸Šä¸‹æ–‡æ›´æ–°
python scripts/chapter_manager.py --action context-update --chapter 1 --content "ç« èŠ‚é‡ç‚¹å†…å®¹"
```

#### settings_display_manager.py ğŸ”¥ NEW
è®¾å®šæ˜¾ç¤ºç®¡ç†å™¨ï¼š
```bash
# æ˜¾ç¤ºä¸–ç•Œè§‚è®¾å®š
python scripts/settings_display_manager.py --type worldview --format readable

# æ˜¾ç¤ºç‰¹å®šè§’è‰²
python scripts/settings_display_manager.py --type character --name "å¼ ä¸‰" --format json

# æ˜¾ç¤ºè®°å¿†ç»Ÿè®¡
python scripts/settings_display_manager.py --action list
```

#### memory_display_manager.py ğŸ”¥ NEW
è®°å¿†æ˜¾ç¤ºç®¡ç†å™¨ï¼š
```bash
# æ˜¾ç¤ºè§’è‰²æ‰€æœ‰è®°å¿†
python scripts/memory_display_manager.py --identifier "å¼ ä¸‰" --type character_all

# æ˜¾ç¤ºè®°å¿†æ—¶é—´çº¿
python scripts/memory_display_manager.py --identifier "å¼ ä¸‰" --type timeline

# æ˜¾ç¤ºè®°å¿†ç»Ÿè®¡
python scripts/memory_display_manager.py --action stats --identifier "å¼ ä¸‰"
```

### References ä½¿ç”¨æ—¶æœº

#### data_schemas.md
åœ¨å®ç°æ•°æ®ç»“æ„å’ŒéªŒè¯æ—¶å‚è€ƒï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®æ¨¡å‹çš„è¯¦ç»†å®šä¹‰ã€‚

#### compression_rules.md
å‹ç¼©è§¦å‘æ—¶å‚è€ƒï¼Œå®šä¹‰ä¸‰å±‚å‹ç¼©çš„å…·ä½“è§„åˆ™å’Œç®—æ³•ã€‚

#### context_strategies.md
ä¸Šä¸‹æ–‡ç®¡ç†ç­–ç•¥å‚è€ƒï¼Œåœ¨ä¸åŒç« èŠ‚ä½ç½®æ—¶å¦‚ä½•ç»„è£…ä¸Šä¸‹æ–‡ã€‚

### Assets ä½¿ç”¨æ–¹æ³•

#### templates/
åŒ…å«é¡¹ç›®æ¨¡æ¿ã€ç« èŠ‚æ¨¡æ¿ã€è®¾å®šæ¨¡æ¿ï¼Œåœ¨åˆ›å»ºæ–°é¡¹ç›®æ—¶ä½¿ç”¨ã€‚

#### examples/
åŒ…å«ä¼˜ç§€ç¤ºä¾‹å’Œæ¼”ç¤ºæ•°æ®ï¼Œåœ¨ç”¨æˆ·éœ€è¦å‚è€ƒæ—¶ä½¿ç”¨ã€‚

## å·¥ä½œæµç¨‹

### è®¾å®šæ¨¡å¼æµç¨‹
1. æ£€æŸ¥ç°æœ‰é¡¹ç›®çŠ¶æ€
2. å¼•å¯¼ç”¨æˆ·å®Œæˆå…­å¤§è®¾å®š
3. éªŒè¯è®¾å®šå®Œæ•´æ€§
4. ä¿å­˜è®¾å®šåˆ°settings/ç›®å½•
5. å‡†å¤‡è¿›å…¥å†™ä½œæ¨¡å¼

### å†™ä½œæ¨¡å¼æµç¨‹
1. åŠ è½½é¡¹ç›®è®¾å®šå’Œç« èŠ‚çŠ¶æ€
2. æ„å»ºå½“å‰ä¸Šä¸‹æ–‡çª—å£
3. ç”Ÿæˆç« èŠ‚å†…å®¹
4. æ£€æŸ¥å‹ç¼©è§¦å‘æ¡ä»¶
5. æ›´æ–°è¿›åº¦å’Œä¼šè¯çŠ¶æ€

### ç« èŠ‚è·³è½¬æµç¨‹
1. ä¿å­˜å½“å‰å·¥ä½œçŠ¶æ€
2. æ¸…ç†ç°æœ‰ä¸Šä¸‹æ–‡
3. åŠ è½½ç›®æ ‡ç« èŠ‚åŠå…¶å‰åºç« èŠ‚
4. é‡å»ºå‹ç¼©ä¸Šä¸‹æ–‡
5. æ¢å¤å†™ä½œçŠ¶æ€

## é”™è¯¯å¤„ç†

- å‹ç¼©å¤±è´¥æ—¶è®°å½•è¯¦ç»†æ—¥å¿—å¹¶æç¤ºç”¨æˆ·
- ä¸Šä¸‹æ–‡è¶…é™æ—¶æ™ºèƒ½é™çº§å¤„ç†
- æ–‡ä»¶æŸåæ—¶æ”¯æŒå¤‡ä»½æ¢å¤
- ç½‘ç»œä¸­æ–­æ—¶æœ¬åœ°ç¼“å­˜ä¿æŠ¤

## AIé›†æˆå·¥ä½œæµç¨‹ ğŸ”¥ NEW

### AIä»»åŠ¡å¤„ç†æµç¨‹
ç³»ç»Ÿé‡‡ç”¨"æœ¬åœ°å¤„ç†+AIå®¢æˆ·ç«¯"æ¶æ„ï¼Œå½“éœ€è¦AIèƒ½åŠ›æ—¶ä¼šè¿”å›æ ‡å‡†åŒ–çš„AIä»»åŠ¡è¯·æ±‚ï¼š

```python
# ç¤ºä¾‹ï¼šå¤„ç†å¯¼å…¥è¯·æ±‚
result = api.process_request({
    "action": "import.from_directory",
    "target_directory": "./source_materials"
})

if result["status"] == "ai_task_required":
    # è·å–AIä»»åŠ¡
    ai_task = result["ai_task"]

    # è°ƒç”¨AIæœåŠ¡å¤„ç†
    ai_result = your_ai_client.process_task(ai_task)

    # åº”ç”¨AIç»“æœ
    final_result = api.process_request({
        "action": "import.process_ai_result",
        "ai_result": ai_result
    })
```

### æ”¯æŒçš„AIä»»åŠ¡ç±»å‹
1. **content_analysis**: åˆ†ææ–‡ä»¶å†…å®¹å¹¶æå–è®¾å®š
2. **content_edit**: æ™ºèƒ½ç¼–è¾‘å’Œæ”¹è¿›å†…å®¹
3. **generate_summary**: ç”Ÿæˆå†…å®¹æ‘˜è¦
4. **memory_analysis**: åˆ†æè®°å¿†å†…å®¹å’Œå…³è”

### AIä»»åŠ¡è¯·æ±‚æ ¼å¼
```json
{
  "status": "ai_task_required",
  "ai_task": {
    "task_type": "content_analysis",
    "files": [...],
    "analysis_instructions": "è¯·è¯†åˆ«ä¸–ç•Œè§‚ã€äººç‰©ã€ç¯å¢ƒç­‰è®¾å®š",
    "supported_settings": ["worldview", "character", "environment"]
  }
}
```

## æ€§èƒ½ä¼˜åŒ–

- å¢é‡å‹ç¼©å‡å°‘é‡å¤è®¡ç®—
- æ™ºèƒ½ç¼“å­˜æœºåˆ¶æå‡å“åº”é€Ÿåº¦
- å¼‚æ­¥å¤„ç†é¿å…ç”¨æˆ·ç­‰å¾…
- åˆ†å±‚å­˜å‚¨ä¼˜åŒ–å†…å­˜ä½¿ç”¨
- AIä»»åŠ¡é˜Ÿåˆ—ç®¡ç†ï¼Œé¿å…é‡å¤è¯·æ±‚